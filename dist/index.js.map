{"version":3,"sources":["webpack:///index.js","webpack:///webpack/bootstrap d655be3b4135aaf34361","webpack:///./src/index.js","webpack:///./~/open-iconic/svg/media-play.svg","webpack:///../dolly/src/index.js","webpack:///../dolly/src/vector.js","webpack:///../dolly/~/gl-matrix-vec3/index.js","webpack:///../dolly/~/gl-matrix-vec3/~/gl-matrix-common/index.js","webpack:///../dolly/~/object-assign/index.js","webpack:///../dolly/~/event-emitter/index.js","webpack:///../dolly/~/event-emitter/~/d/index.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/assign/index.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/assign/is-implemented.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/assign/shim.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/keys/index.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/keys/is-implemented.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/keys/shim.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/valid-value.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/normalize-options.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/is-callable.js","webpack:///../dolly/~/event-emitter/~/es5-ext/string/#/contains/index.js","webpack:///../dolly/~/event-emitter/~/es5-ext/string/#/contains/is-implemented.js","webpack:///../dolly/~/event-emitter/~/es5-ext/string/#/contains/shim.js","webpack:///../dolly/~/event-emitter/~/es5-ext/object/valid-callable.js","webpack:///./~/d3-xhr/build/xhr.js","webpack:///./~/binary-search/index.js","webpack:///./~/simple-number-formatter/index.js","webpack:///./~/simple-number-formatter/~/merge/merge.js","webpack:///(webpack)/buildin/module.js","webpack:///./~/open-iconic/svg/media-pause.svg","webpack:///./~/open-iconic/svg/media-step-backward.svg","webpack:///./~/open-iconic/svg/media-skip-backward.svg","webpack:///./~/open-iconic/svg/media-skip-forward.svg","webpack:///./~/open-iconic/svg/media-step-forward.svg"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","resize","width","height","marginX","marginY","clearTimeout","resizeTimeout","Date","now","lastResize","setTimeout","window","innerWidth","innerHeight","controls","offsetHeight","ctx","canvas","dim","z","scale","camera","minBounds","x","y","maxBounds","max","field","min","vPadding","draw","comparePoints","a","b","date","pointToX","point","period","PERIOD","pointToY","findPoint","list","index","binarySearch","nearestPoint","Math","floor","data","interpolate","next","highX","partial","lowX","canvasX","position","canvasY","i","lo","hi","worldWidth","worldHeight","minWorldX","maxWorldX","minWorldY","maxWorldY","fillStyle","colors","bg","fillRect","strokeStyle","grid","lineWidth","gridLine","beginPath","ceil","gridSpacing","moveTo","lineTo","stroke","note","noteLine","noteData","forEach","line","chartLine","fill","player","arc","PI","restore","animate","updatePlayer","x1","x2","y1","y2","speed","direction","activeButtons","leftKey","skipBackward","rightKey","skipForward","playing","length","sqrt","pow","delta","textContent","value","format","thousandsDelimeter","moving","lastTime","dolly","update","active","requestAnimationFrame","loadNotes","xhr","response","updateAttractor","prop","att","k","attraction","activeAttractors","hasOwnProperty","playRate","tsv","responseText","trim","split","fields","shift","map","reduce","prev","str","val","parseFloat","parse","isNaN","Object","create","start","end","minY","Infinity","maxY","minX","maxX","attractor","name","attract","timeline","offset","zoom","innerRadius","outerRadius","div","document","createElement","style","display","notes","appendChild","paragraph","on","buildInterface","play","buttons","classList","add","pause","remove","keyDown","evt","keyCode","keyUp","buttonDown","button","buttonUp","stepBack","stepNext","stepBackward","stepForward","keys","key","svg","span","innerHTML","firstChild","setAttribute","iconSize","addEventListener","bind","className","infobutton","info","Dolly","dpr","devicePixelRatio","getElementById","getContext","dataFile","text","sort","first","last","lag","follow","radius","makeVector","arg","V","Vector","apply","this","Array","isArray","prototype","clone","safeDivide","denom","va","vec","vb","Prop","opts","options","lastUpdate","propId","undefined","maxSpeed","goal","attractorGoal","velocity","lastPosition","targets","attractors","eventEmitter","tick","props","updating","self","push","epsilon","assign","scratch","totalWeight","target","weight","Error","minDistance","maxDistance","offsetPosition","subject","_this","totalAttractionWeight","totalAttraction","copyVector","emit","zero","distance","lastAttraction","scaleAndAdd","subtract","normalize","multiply","lerp","vec3","fromValues","defineProperties","writeable","enumerable","get","set","toString","v","copy","negate","t","fn","squaredLength","fromArray","array","GLMAT_ARRAY_TYPE","GLMAT_RANDOM","out","sub","mul","divide","dist","squaredDistance","sqrDist","len","sqrLen","dot","cross","ax","ay","az","bx","by","bz","random","r","zScale","cos","sin","transformMat4","transformMat3","transformQuat","q","qx","qy","qz","qw","ix","iy","iz","iw","rotateX","rotateY","rotateZ","stride","count","l","GLMAT_EPSILON","Float32Array","glMatrix","setMatrixArrayType","type","degree","toRadian","ToObject","TypeError","ownEnumerableKeys","obj","getOwnPropertyNames","getOwnPropertySymbols","concat","filter","propIsEnumerable","propertyIsEnumerable","source","from","to","s","arguments","once","off","methods","descriptors","base","d","callable","Function","defineProperty","descriptor","configurable","writable","listener","__ee__","__eeOnceListener__","listeners","candidate","splice","args","slice","o","normalizeOpts","isCallable","contains","dscr","e","w","desc","gs","foo","bar","trzy","dest","src","error","object","process","result","String","indexOf","searchString","Map","clear","_","has","delete",{"end":{"file":"index.js","comments_before":[],"nlb":false,"endpos":55447,"endcol":13,"endline":2317,"pos":55443,"col":9,"line":2317,"value":"size","type":"name","_comments_dumped":true},"start":{"file":"index.js","comments_before":[],"nlb":false,"endpos":55447,"endcol":13,"endline":2317,"pos":55443,"col":9,"line":2317,"value":"size","type":"name","_comments_dumped":true},"name":"size"},"size","n","global","factory","responseOf","dsv","row","request","fixCallback","callback","hasResponse","responseType","Dispatch","types","parseType","callbacksByType","applier","callbackValue","callbacks","that","callbackByName","callback0","otherType","dispatch","delimiter","f","parseRows","JSON","stringify","join","token","I","N","EOF","eol","EOL","j","charCodeAt","replace","delimiterCode","rows","formatRows","fieldSet","formatValue","formatRow","reFormat","test","RegExp","url","respond","status","event","load","mimeType","headers","XMLHttpRequest","XDomainRequest","onload","onerror","onreadystatechange","readyState","onprogress","progress","header","toLowerCase","send","post","method","open","setRequestHeader","overrideMimeType","beforesend","abort","xhrDsv","defaultMimeType","_tsv","csv","_csv","xhrType","xml","responseXML","json","html","createRange","createContextualFragment","haystack","needle","comparator","low","high","mid","cmp","RangeError","formatNumber","number","signed","negative","whole","divisional","precision","thousands","toFixed","roundingFunction","decimalDelimeter","optionals","optionalsRegExp","output","power","merge","defaultOptions","round","isNode","merge_recursive","extend","typeOf","recursive","argv","item","sitem","Public","input","publicName","webpackPolyfill","deprecate","paths","children"],"mappings":"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","file":"index.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t(function () {\n\t\t'use strict';\n\t\n\t\t//dependencies\n\t\tvar Dolly = __webpack_require__(2);\n\t\tvar xhr = __webpack_require__(22).xhr;\n\t\tvar binarySearch = __webpack_require__(23);\n\t\tvar format = __webpack_require__(24);\n\t\n\t\tvar PERIOD = 1; //1000 * 60 * 60 * 24 * 7;\n\t\tvar dpr = window.devicePixelRatio || 1;\n\t\n\t\t//state\n\t\tvar dolly = new Dolly();\n\t\tvar lastTime = 0;\n\t\tvar data;\n\t\tvar noteData = [];\n\t\tvar previous = {\n\t\t\tx: -1,\n\t\t\ty: -1,\n\t\t\tz: -1\n\t\t};\n\t\tvar playRate = 1;\n\t\tvar lastResize = -1;\n\t\tvar resizeTimeout;\n\t\tvar playing = false;\n\t\tvar camera;\n\t\tvar player;\n\t\tvar timeline;\n\t\tvar activeButtons = {\n\t\t\tleftKey: false,\n\t\t\trightKey: false\n\t\t};\n\t\n\t\tvar max = {},\n\t\t    min = {};\n\t\n\t\tvar ctx = document.getElementById('canvas').getContext('2d');\n\t\tvar period = document.getElementById('period');\n\t\tvar value = document.getElementById('value');\n\t\tvar notes = document.getElementById('notes');\n\t\tvar infobutton = document.getElementById('infobutton');\n\t\tvar info = document.getElementById('info');\n\t\tvar controls = document.getElementById('controls');\n\t\n\t\t//config\n\t\tvar field = 'immigrants';\n\t\tvar dataFile = 'data/immigration.tsv';\n\t\tvar colors = {\n\t\t\tbg: '#333333',\n\t\t\tline: 'rgb(63, 113, 190)',\n\t\t\tfill: 'rgba(63, 113, 190, 0.3)',\n\t\t\tgrid: '#666',\n\t\t\ttext: '#ffffff',\n\t\t\tplayer: '#ff0000',\n\t\t\tnote: '#dddddd'\n\t\t};\n\t\tvar dim = {\n\t\t\tspeed: 50, //periods per second, left or right\n\t\t\tchartLine: 1,\n\t\t\ticonSize: 20,\n\t\t\tscale: 1 * dpr, //canvas pixels per \"world\" unit\n\t\t\tplayer: 3,\n\t\t\tvPadding: 10,\n\t\t\tgridLine: 1,\n\t\t\tnoteLine: 2,\n\t\t\tgridSpacing: 20, //distance between x axis grid lines\n\t\t\tx: 8, //distance per period on x axis\n\t\t\ty: 1 / 4000, //distance per $ on y axis\n\t\t\tz: 5 //default zoom level\n\t\t};\n\t\n\t\tfunction resize() {\n\t\t\tvar width, height, marginX, marginY;\n\t\n\t\t\t//throttle to one resize every 100ms\n\t\t\tclearTimeout(resizeTimeout);\n\t\t\tif (Date.now() - lastResize < 100) {\n\t\t\t\tresizeTimeout = setTimeout(resize);\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\twidth = window.innerWidth;\n\t\t\theight = window.innerHeight;\n\t\n\t\t\theight -= controls.offsetHeight;\n\t\n\t\t\tctx.canvas.width = width;\n\t\t\tctx.canvas.height = height;\n\t\n\t\t\t/*\n\t  set min/max of camera based on zoom\n\t  */\n\t\t\tmarginX = width / (dim.z * dim.scale) / 2;\n\t\t\tmarginY = height / (dim.z * dim.scale) / 2;\n\t\t\tcamera.minBounds.x = marginX;\n\t\t\tcamera.minBounds.y = marginY;\n\t\t\tcamera.maxBounds.x = max.x - marginX;\n\t\t\tcamera.maxBounds.y = (max[field] - min[field]) * dim.y - marginY + dim.vPadding * 2;\n\t\n\t\t\tdraw();\n\t\t\tlastResize = Date.now();\n\t\t}\n\t\n\t\tfunction comparePoints(a, b) {\n\t\t\treturn a.date - b.date;\n\t\t}\n\t\n\t\t/*\n\t Converts from date/value to x/y in \"world\" space\n\t */\n\t\tfunction pointToX(point) {\n\t\t\t//convert date to period # before scaling\n\t\t\tvar period = (point.date - min.date) / PERIOD;\n\t\t\treturn period * dim.x;\n\t\t}\n\t\n\t\tfunction pointToY(point) {\n\t\t\treturn (point[field] - min[field]) * dim.y + dim.vPadding;\n\t\t}\n\t\n\t\t/*\n\t Given date, find the nearest data point\n\t */\n\t\tfunction findPoint(list, date) {\n\t\t\tvar index = binarySearch(list, {\n\t\t\t\tdate: date\n\t\t\t}, comparePoints); //, lo, hi);\n\t\n\t\t\t/*\n\t  Negative result is bitwise complement of the index of the first element\n\t  that is larger than value */\n\t\t\tif (index < 0) {\n\t\t\t\treturn ~index - 1; //jshint ignore: line\n\t\t\t}\n\t\n\t\t\treturn index;\n\t\t}\n\t\n\t\tfunction nearestPoint(x) {\n\t\t\tvar date = Math.floor(x / dim.x * PERIOD) + min.date;\n\t\t\treturn findPoint(data, date);\n\t\t}\n\t\n\t\tfunction interpolate(x, point, next) {\n\t\t\tvar lowX = pointToX(point),\n\t\t\t    highX,\n\t\t\t    y = pointToY(point),\n\t\t\t    partial;\n\t\n\t\t\t//interpolate\n\t\t\tif (x > lowX && next) {\n\t\t\t\thighX = pointToX(next);\n\t\t\t\tpartial = (x - lowX) / (highX - lowX);\n\t\t\t\ty = (1 - partial) * y + partial * pointToY(next);\n\t\t\t}\n\t\n\t\t\treturn y;\n\t\t}\n\t\n\t\tfunction draw() {\n\t\t\tvar width = ctx.canvas.width,\n\t\t\t    height = ctx.canvas.height;\n\t\n\t\t\t//calculate \"camera\" values\n\t\t\tvar scale = camera.position.z * dim.scale;\n\t\t\tvar worldWidth = width * scale / camera.position.z;\n\t\t\tvar worldHeight = height * scale / camera.position.z;\n\t\t\tvar minWorldX = camera.position.x - worldWidth / 2;\n\t\t\tvar maxWorldX = minWorldX + worldWidth;\n\t\t\tvar minWorldY = camera.position.y - worldHeight / 2;\n\t\t\tvar maxWorldY = minWorldY + worldHeight;\n\t\n\t\t\tvar i;\n\t\t\tvar lo, hi;\n\t\t\tvar x, y;\n\t\t\tvar point;\n\t\n\t\t\t/*\n\t  Convert from \"world\" space to canvas space\n\t  */\n\t\t\tfunction canvasX(x) {\n\t\t\t\t//todo: add margin\n\t\t\t\treturn (x - camera.position.x) * scale + width / 2;\n\t\t\t}\n\t\n\t\t\tfunction canvasY(y) {\n\t\t\t\t//todo: add margin\n\t\t\t\treturn height - ((y - camera.position.y) * scale + height / 2);\n\t\t\t}\n\t\n\t\t\t//clear\n\t\t\tctx.fillStyle = colors.bg;\n\t\t\tctx.fillRect(0, 0, width, height);\n\t\n\t\t\tlo = nearestPoint(Math.max(0, minWorldX));\n\t\t\thi = nearestPoint(maxWorldX) + 1;\n\t\n\t\t\t//todo: draw x/y axes\n\t\n\t\t\t//draw grid lines\n\t\t\t//todo: align with years\n\t\t\tctx.strokeStyle = colors.grid;\n\t\t\tctx.lineWidth = dim.gridLine;\n\t\t\tctx.beginPath();\n\t\n\t\t\t//horizontal grid lines\n\t\t\ti = Math.ceil(pointToX(data[lo]) / dim.gridSpacing) * dim.gridSpacing;\n\t\t\twhile (i < maxWorldX) {\n\t\t\t\tx = canvasX(i);\n\t\t\t\tctx.moveTo(x, 0);\n\t\t\t\tctx.lineTo(x, height);\n\t\t\t\ti += dim.gridSpacing;\n\t\t\t}\n\t\n\t\t\t//vertical grid lines\n\t\t\ti = Math.ceil(minWorldY / dim.gridSpacing) * dim.gridSpacing;\n\t\t\twhile (i < maxWorldY) {\n\t\t\t\ty = canvasY(i);\n\t\t\t\tctx.moveTo(0, y);\n\t\t\t\tctx.lineTo(width, y);\n\t\t\t\ti += dim.gridSpacing;\n\t\t\t}\n\t\t\tctx.stroke();\n\t\n\t\t\t//note markers\n\t\t\tctx.strokeStyle = colors.note;\n\t\t\tctx.lineWidth = dim.noteLine;\n\t\t\tctx.beginPath();\n\t\t\tnoteData.forEach(function (note) {\n\t\t\t\tvar i = findPoint(data, note.date),\n\t\t\t\t    point = data[i],\n\t\t\t\t    next,\n\t\t\t\t    x = pointToX(point),\n\t\t\t\t    y = interpolate(x, point, data[i + 1]);\n\t\n\t\t\t\tx = canvasX(x);\n\t\t\t\ty = canvasY(y);\n\t\t\t\tctx.moveTo(x, y);\n\t\t\t\tctx.lineTo(x, height);\n\t\t\t});\n\t\t\tctx.stroke();\n\t\n\t\t\t//draw line\n\t\t\tctx.strokeStyle = colors.line;\n\t\t\tctx.lineWidth = dim.chartLine;\n\t\t\tctx.beginPath();\n\t\t\tfor (i = lo; i < hi; i++) {\n\t\t\t\tpoint = data[i];\n\t\t\t\tx = canvasX(pointToX(point));\n\t\t\t\ty = canvasY(pointToY(point));\n\t\n\t\t\t\tif (i) {\n\t\t\t\t\tctx.lineTo(x, y);\n\t\t\t\t} else {\n\t\t\t\t\tctx.moveTo(x, y);\n\t\t\t\t}\n\t\t\t}\n\t\t\tctx.stroke();\n\t\n\t\t\t//fill under graph\n\t\t\tctx.fillStyle = colors.fill;\n\t\t\tctx.lineTo(x, height * dim.scale);\n\t\t\tctx.lineTo(0, height * dim.scale);\n\t\t\tctx.fill();\n\t\n\t\t\t//draw player\n\t\t\tctx.fillStyle = colors.player;\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(canvasX(player.position.x), canvasY(player.position.y), dim.player * dim.scale, 0, Math.PI * 2);\n\t\t\tctx.fill();\n\t\n\t\t\tctx.restore();\n\t\t}\n\t\n\t\tfunction animate() {\n\t\t\tvar now = Date.now(),\n\t\t\t    delta = Math.min(500, (Date.now() - lastTime) / 1000),\n\t\t\t    moving;\n\t\n\t\t\tfunction updatePlayer() {\n\t\t\t\tvar i,\n\t\t\t\t    point,\n\t\t\t\t    next,\n\t\t\t\t    direction = 0,\n\t\t\t\t    x,\n\t\t\t\t    x1,\n\t\t\t\t    x2,\n\t\t\t\t    y1,\n\t\t\t\t    y2,\n\t\t\t\t    speed;\n\t\n\t\t\t\tx = player.position.x;\n\t\n\t\t\t\t//move left or right\n\t\t\t\tif (activeButtons.leftKey || activeButtons.skipBackward) {\n\t\t\t\t\tdirection -= 1;\n\t\t\t\t}\n\t\t\t\tif (activeButtons.rightKey || activeButtons.skipForward) {\n\t\t\t\t\tdirection += 1;\n\t\t\t\t}\n\t\t\t\tif (!direction && playing) {\n\t\t\t\t\tdirection = 1;\n\t\t\t\t}\n\t\n\t\t\t\ti = nearestPoint(x);\n\t\t\t\tpoint = data[i];\n\t\n\t\t\t\tif (direction) {\n\t\t\t\t\t/*\n\t    Adjust speed for slope so the \"player\" moves at a constant rate\n\t    regardless of whether it moves up or down.\n\t    */\n\t\t\t\t\tif (i) {\n\t\t\t\t\t\tnext = data[Math.max(0, Math.min(data.length - 1, i + direction))];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext = data[1];\n\t\t\t\t\t}\n\t\t\t\t\tx1 = pointToX(point);\n\t\t\t\t\tx2 = pointToX(next);\n\t\t\t\t\ty1 = pointToY(point);\n\t\t\t\t\ty2 = pointToY(next);\n\t\t\t\t\tspeed = dim.x / Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n\t\n\t\t\t\t\tx += dim.speed * speed * delta * direction;\n\t\n\t\t\t\t\t//keep from going off the edge of the screen\n\t\t\t\t\tx = Math.min(max.x, Math.max(min.x, x));\n\t\n\t\t\t\t\tplayer.position.x = x;\n\t\t\t\t}\n\t\n\t\t\t\tplayer.position.y = interpolate(x, point, data[i + 1]);\n\t\n\t\t\t\t//display stats\n\t\t\t\tperiod.textContent = point.date;\n\t\t\t\tvalue.textContent = format(point[field], '0,0', { thousandsDelimeter: ',' });\n\t\n\t\t\t\treturn !!direction;\n\t\t\t}\n\t\n\t\t\tmoving = updatePlayer();\n\t\t\tdolly.update(delta);\n\t\n\t\t\tif (moving || dolly.active(0.001)) {\n\t\t\t\t// don't draw if no updates\n\t\t\t\tdraw();\n\t\t\t}\n\t\n\t\t\tlastTime = now;\n\t\n\t\t\trequestAnimationFrame(animate);\n\t\t}\n\t\n\t\tfunction loadNotes() {\n\t\t\txhr('data/notes.tsv', function (response) {\n\t\t\t\tvar tsv = response.responseText.trim().split('\\n');\n\t\t\t\tvar fields = tsv.shift().split('\\t');\n\t\t\t\tvar activeAttractors = {};\n\t\n\t\t\t\tfunction updateAttractor(prop, att) {\n\t\t\t\t\tvar k;\n\t\t\t\t\tvar attraction = 0;\n\t\t\t\t\tvar att;\n\t\n\t\t\t\t\tactiveAttractors[prop.id] = att || 0;\n\t\n\t\t\t\t\tfor (k in activeAttractors) {\n\t\t\t\t\t\tif (activeAttractors.hasOwnProperty(k)) {\n\t\t\t\t\t\t\tatt = activeAttractors[k];\n\t\t\t\t\t\t\tattraction = Math.max(attraction, att);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//slight slowdown in playback rate when close to points of interest\n\t\t\t\t\tplayRate = 1 - attraction * 0.5;\n\t\t\t\t}\n\t\n\t\t\t\tnoteData = tsv.map(function (line, i) {\n\t\t\t\t\treturn line.split('\\t').reduce(function (prev, str, i) {\n\t\t\t\t\t\tvar field = fields[i];\n\t\t\t\t\t\tvar val = parseFloat(str);\n\t\t\t\t\t\tvar date = Date.parse(str);\n\t\t\t\t\t\tif (isNaN(val)) {\n\t\t\t\t\t\t\tif (date > 0) {\n\t\t\t\t\t\t\t\tval = date;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tval = str;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tprev[field] = val;\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}, Object.create(null));\n\t\t\t\t});\n\t\t\t\tnoteData.forEach(function (note) {\n\t\t\t\t\tvar lo = findPoint(data, note.start);\n\t\t\t\t\tvar hi = Math.min(data.length, findPoint(data, note.end) + 1);\n\t\t\t\t\tvar minY = Infinity;\n\t\t\t\t\tvar maxY = -Infinity;\n\t\t\t\t\tvar minX = pointToX(data[lo]);\n\t\t\t\t\tvar maxX = pointToX(data[hi - 1]);\n\t\t\t\t\tvar i;\n\t\t\t\t\tvar y;\n\t\t\t\t\tvar point;\n\t\n\t\t\t\t\tfor (i = lo; i < hi; i++) {\n\t\t\t\t\t\tpoint = data[i];\n\t\t\t\t\t\ty = pointToY(point);\n\t\t\t\t\t\tminY = Math.min(minY, y);\n\t\t\t\t\t\tmaxY = Math.max(maxY, y);\n\t\t\t\t\t}\n\t\n\t\t\t\t\t//create attractor\n\t\t\t\t\tvar attractor = dolly.prop({\n\t\t\t\t\t\tname: note.date,\n\t\t\t\t\t\tposition: [(minX + maxX) / 2, 0, 0]\n\t\t\t\t\t});\n\t\n\t\t\t\t\tcamera.attract(timeline, attractor, {\n\t\t\t\t\t\toffset: [0, (minY + maxY) / 2, note.zoom],\n\t\t\t\t\t\tinnerRadius: (maxX - minX) / 2,\n\t\t\t\t\t\touterRadius: 1.2 * (maxX - minX) / 2\n\t\t\t\t\t});\n\t\n\t\t\t\t\tvar div = document.createElement('div');\n\t\t\t\t\tdiv.style.display = 'none';\n\t\t\t\t\tnotes.appendChild(div);\n\t\t\t\t\tnote.note.split('\\n').forEach(function (paragraph) {\n\t\t\t\t\t\tvar p = document.createElement('p');\n\t\t\t\t\t\tp.textContent = paragraph;\n\t\t\t\t\t\tdiv.appendChild(p);\n\t\t\t\t\t});\n\t\n\t\t\t\t\ttimeline.on('enterattractor', function (prop, att) {\n\t\t\t\t\t\tif (prop === attractor) {\n\t\t\t\t\t\t\tdiv.style.display = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\ttimeline.on('leaveattractor', function (prop, att) {\n\t\t\t\t\t\tif (prop === attractor) {\n\t\t\t\t\t\t\tdiv.style.display = 'none';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\n\t\t\t\ttimeline.on('enterattractor', updateAttractor);\n\t\t\t\ttimeline.on('moveattractor', updateAttractor);\n\t\t\t\ttimeline.on('leaveattractor', updateAttractor);\n\t\t\t});\n\t\t}\n\t\n\t\tfunction buildInterface() {\n\t\t\tvar buttons = {\n\t\t\t\t'pause': __webpack_require__(27),\n\t\t\t\t'play': __webpack_require__(1),\n\t\t\t\t'stepBackward': __webpack_require__(28),\n\t\t\t\t'skipBackward': __webpack_require__(29),\n\t\t\t\t'skipForward': __webpack_require__(30),\n\t\t\t\t'stepForward': __webpack_require__(31)\n\t\t\t};\n\t\n\t\t\t//interface functions\n\t\n\t\t\tfunction play() {\n\t\t\t\tplaying = true;\n\t\t\t\tbuttons.play.classList.add('hidden');\n\t\t\t\tbuttons.pause.classList.remove('hidden');\n\t\t\t}\n\t\n\t\t\tfunction pause() {\n\t\t\t\tplaying = false;\n\t\t\t\tbuttons.play.classList.remove('hidden');\n\t\t\t\tbuttons.pause.classList.add('hidden');\n\t\t\t}\n\t\n\t\t\tfunction keyDown(evt) {\n\t\t\t\tswitch (evt.keyCode) {\n\t\t\t\t\tcase 37: //left\n\t\t\t\t\tcase 65:\n\t\t\t\t\t\t//a\n\t\t\t\t\t\tactiveButtons.leftKey = true;\n\t\t\t\t\t\tpause();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 39: //right\n\t\t\t\t\tcase 68:\n\t\t\t\t\t\t//d\n\t\t\t\t\t\tactiveButtons.rightKey = true;\n\t\t\t\t\t\tpause();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction keyUp(evt) {\n\t\t\t\tswitch (evt.keyCode) {\n\t\t\t\t\tcase 37: //left\n\t\t\t\t\tcase 65:\n\t\t\t\t\t\t//a\n\t\t\t\t\t\tactiveButtons.leftKey = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 39: //right\n\t\t\t\t\tcase 68:\n\t\t\t\t\t\t//d\n\t\t\t\t\t\tactiveButtons.rightKey = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 32:\n\t\t\t\t\t\t//space\n\t\t\t\t\t\tif (playing) {\n\t\t\t\t\t\t\tpause();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tplay();\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tfunction buttonDown(button, name, evt) {\n\t\t\t\tpause();\n\t\t\t\tbutton.classList.add('active');\n\t\t\t\tactiveButtons[name] = true;\n\t\t\t}\n\t\n\t\t\tfunction buttonUp(button, name) {\n\t\t\t\tbutton.classList.remove('active');\n\t\t\t\tactiveButtons[name] = false;\n\t\t\t}\n\t\n\t\t\tfunction stepBack() {\n\t\t\t\tvar date = Math.floor(player.position.x / dim.x * PERIOD) + min.date,\n\t\t\t\t    i = findPoint(noteData, date),\n\t\t\t\t    x;\n\t\n\t\t\t\tif (i < 0) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tx = pointToX(noteData[i]);\n\t\t\t\tif (i && player.position.x - x < 0.1) {\n\t\t\t\t\ti--;\n\t\t\t\t\tx = pointToX(noteData[i]);\n\t\t\t\t}\n\t\t\t\tplayer.position.x = x;\n\t\t\t}\n\t\n\t\t\tfunction stepNext() {\n\t\t\t\tvar date = Math.floor(player.position.x / dim.x * PERIOD) + min.date,\n\t\t\t\t    i = findPoint(noteData, date) + 1;\n\t\n\t\t\t\tif (i < noteData.length) {\n\t\t\t\t\tplayer.position.x = pointToX(noteData[i]);\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\t//buttons\n\t\t\tObject.keys(buttons).forEach(function (key) {\n\t\t\t\tvar span = document.createElement('span'),\n\t\t\t\t    svg;\n\t\n\t\t\t\tspan.innerHTML = buttons[key];\n\t\t\t\tspan.id = key;\n\t\t\t\tsvg = span.firstChild;\n\t\t\t\tsvg.setAttribute('width', dim.iconSize);\n\t\t\t\tsvg.setAttribute('height', dim.iconSize);\n\t\n\t\t\t\tspan.addEventListener('mousedown', buttonDown.bind(null, span, key), false);\n\t\t\t\tspan.addEventListener('mouseup', buttonUp.bind(null, span, key), false);\n\t\t\t\tspan.addEventListener('mouseup', buttonUp.bind(null, span, key), false);\n\t\n\t\t\t\tcontrols.appendChild(span);\n\t\t\t\tbuttons[key] = span;\n\t\t\t});\n\t\n\t\t\tbuttons.pause.className = 'hidden';\n\t\t\tbuttons.stepBackward.addEventListener('click', stepBack, false);\n\t\t\tbuttons.stepForward.addEventListener('click', stepNext, false);\n\t\t\tbuttons.play.addEventListener('click', play, false);\n\t\t\tbuttons.pause.addEventListener('click', pause, false);\n\t\n\t\t\tinfobutton.addEventListener('click', function () {\n\t\t\t\tif (info.className) {\n\t\t\t\t\tinfo.className = '';\n\t\t\t\t} else {\n\t\t\t\t\tinfo.className = 'open';\n\t\t\t\t}\n\t\t\t});\n\t\n\t\t\t//keyboard\n\t\t\tdocument.addEventListener('keydown', keyDown, false);\n\t\t\tdocument.addEventListener('keyup', keyUp, false);\n\t\t}\n\t\n\t\txhr(dataFile, function (response) {\n\t\t\tvar tsv = response.responseText.split('\\n');\n\t\t\tvar fields = tsv.shift().split('\\t');\n\t\n\t\t\tfields.forEach(function (field) {\n\t\t\t\tmin[field] = Infinity;\n\t\t\t\tmax[field] = -Infinity;\n\t\t\t});\n\t\n\t\t\tdata = tsv.map(function (line, i) {\n\t\t\t\treturn line.split('\\t').reduce(function (prev, str, i) {\n\t\t\t\t\tvar field = fields[i];\n\t\t\t\t\tvar val = parseFloat(str);\n\t\t\t\t\tvar date = Date.parse(str);\n\t\t\t\t\tif (isNaN(val) && date > 0) {\n\t\t\t\t\t\tval = date;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tmax[field] = Math.max(max[field], val);\n\t\t\t\t\tmin[field] = Math.min(min[field], val);\n\t\n\t\t\t\t\tprev[field] = val;\n\t\t\t\t\treturn prev;\n\t\t\t\t}, Object.create(null));\n\t\t\t}).sort(comparePoints);\n\t\n\t\t\tvar first = data[0];\n\t\t\tvar last = data[data.length - 1];\n\t\t\tmin.x = pointToX(first);\n\t\t\tmax.x = pointToX(last);\n\t\n\t\t\t/*\n\t  Now that data has been processed, set up the rest of the scene\n\t  */\n\t\t\tplayer = dolly.prop({\n\t\t\t\tname: 'player',\n\t\t\t\t// position: [max.x, pointToY(last), 0]\n\t\t\t\tposition: [min.x, pointToY(first), 0]\n\t\t\t});\n\t\n\t\t\tcamera = dolly.prop({\n\t\t\t\tname: 'camera',\n\t\t\t\tposition: [player.position.x, player.position.y, dim.z],\n\t\t\t\tlag: 0.85\n\t\t\t});\n\t\n\t\t\t/*\n\t  A separate prop for timeline that follows the player along the x\n\t  axis, so the attractor is not affected by distance along the y axis\n\t  */\n\t\t\ttimeline = dolly.prop({\n\t\t\t\tname: 'timeline',\n\t\t\t\tposition: [player.position.x, 0, 0],\n\t\t\t\tminBounds: [0, 0, 0],\n\t\t\t\tmaxBounds: [Infinity, 0, 0]\n\t\t\t});\n\t\n\t\t\tcamera.follow(player, {\n\t\t\t\toffset: [0, 0, dim.z],\n\t\t\t\tradius: 6\n\t\t\t});\n\t\n\t\t\ttimeline.follow(player, {\n\t\t\t\tlag: 0\n\t\t\t});\n\t\n\t\t\tloadNotes();\n\t\t\tbuildInterface();\n\t\n\t\t\tresize();\n\t\t\tanimate();\n\t\t});\n\t\n\t\twindow.addEventListener('resize', resize, false);\n\t})();\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l6-3-6-3z\\\" transform=\\\"translate(1 1)\\\" />\\n</svg>\"\n\n/***/ },\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//dependencies\n\tvar Vector = __webpack_require__(3);\n\tvar assign = __webpack_require__(6); //todo: use babel\n\tvar eventEmitter = __webpack_require__(7);\n\t\n\tvar propId = 0;\n\t\n\t//scratch vectors so we don't have to re-allocate all the time (too slow)\n\tvar scratch = new Vector();\n\tvar totalWeight = new Vector();\n\t\n\tfunction makeVector(arg) {\n\t\tfunction V() {\n\t\t\treturn Vector.apply(this, arg);\n\t\t}\n\t\n\t\tif (typeof arg === 'number') {\n\t\t\treturn new Vector(arg, arg, arg);\n\t\t}\n\t\n\t\tif (Array.isArray(arg)) {\n\t\t\tV.prototype = Vector.prototype;\n\t\t\treturn new V();\n\t\t}\n\t\n\t\tif (arg instanceof Vector) {\n\t\t\treturn Vector.clone(arg);\n\t\t}\n\t\n\t\tif (arg && typeof arg === 'object') {\n\t\t\treturn new Vector(arg.x || 0, arg.y || 0, arg.z || 0);\n\t\t}\n\t\n\t\treturn new Vector();\n\t}\n\t\n\tfunction safeDivide(a, b) {\n\t\tvar va = a.vec,\n\t\t    vb = b.vec,\n\t\t    i,\n\t\t    denom;\n\t\tfor (i = 0; i < 3; i++) {\n\t\t\tdenom = vb[i];\n\t\t\tif (denom) {\n\t\t\t\tva[i] = va[i] / denom;\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfunction Prop(opts) {\n\t\tvar options = opts || {};\n\t\n\t\tthis.lastUpdate = -1;\n\t\tthis.id = propId++;\n\t\n\t\tthis.name = options.name || 'prop' + this.id;\n\t\n\t\tthis.position = makeVector(options.position);\n\t\tthis.minBounds = makeVector(options.minBounds === undefined ? -Infinity : options.minBounds);\n\t\tthis.maxBounds = makeVector(options.maxBounds === undefined ? Infinity : options.maxBounds);\n\t\tthis.lag = typeof options.lag === 'number' && !isNaN(options.lag) ? options.lag : 0;\n\t\tthis.maxSpeed = typeof options.maxSpeed === 'number' && !isNaN(options.maxSpeed) ? options.maxSpeed : Infinity;\n\t\n\t\tthis.goal = new Vector();\n\t\tthis.attractorGoal = new Vector();\n\t\tthis.velocity = new Vector();\n\t\tthis.lastPosition = Vector.clone(this.position);\n\t\tthis.targets = [];\n\t\tthis.attractors = [];\n\t\n\t\teventEmitter(this);\n\t}\n\t\n\tProp.prototype.follow = function (prop, options) {\n\t\tvar target;\n\t\tvar self = this;\n\t\tvar weight;\n\t\n\t\tif (Array.isArray(prop)) {\n\t\t\tprop.forEach(function (p) {\n\t\t\t\tself.follow(p, options);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (!(prop instanceof Prop)) {\n\t\t\tthrow new Error('Attempt to follow object that is not a Prop');\n\t\t}\n\t\n\t\tweight = options && options.weight;\n\t\tif (weight === undefined || isNaN(weight) && typeof weight === 'number') {\n\t\t\tweight = 1;\n\t\t}\n\t\n\t\ttarget = assign({\n\t\t\tprop: prop,\n\t\t\tradius: 0,\n\t\t\tminDistance: 0,\n\t\t\tmaxDistance: Infinity,\n\t\t\tweight: 1\n\t\t}, options, {\n\t\t\tweight: makeVector(weight),\n\t\t\toffset: makeVector(options && options.offset),\n\t\t\toffsetPosition: new Vector()\n\t\t});\n\t\n\t\tthis.targets.push(target);\n\t\n\t\treturn this;\n\t};\n\t\n\tProp.prototype.attract = function (prop, subject, options) {\n\t\tvar attractor;\n\t\tvar self = this;\n\t\n\t\tif (Array.isArray(prop)) {\n\t\t\tprop.forEach(function (p) {\n\t\t\t\tself.attract(p, options);\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\n\t\tif (!(prop instanceof Prop) || !(subject instanceof Prop)) {\n\t\t\tthrow new Error('Attempt to follow object that is not a Prop');\n\t\t}\n\t\n\t\tattractor = assign({\n\t\t\tprop: prop, //the object that moves\n\t\t\tsubject: subject, //the point of interest\n\t\t\tinnerRadius: 0,\n\t\t\touterRadius: 0,\n\t\t\tweight: 1\n\t\t}, options, {\n\t\t\toffset: makeVector(options && options.offset),\n\t\t\toffsetPosition: new Vector(),\n\t\t\tattraction: 0\n\t\t});\n\t\n\t\tthis.attractors.push(attractor);\n\t\n\t\treturn this;\n\t};\n\t\n\tProp.prototype.update = function (delta, tick) {\n\t\tvar _this = this;\n\t\n\t\tvar totalAttractionWeight = 0;\n\t\tvar totalAttraction = 0;\n\t\n\t\t//prevent infinite loops if follower graph is cyclical\n\t\tif (this.lastUpdate >= tick || tick === undefined) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tthis.lastUpdate = tick;\n\t\n\t\tthis.lastPosition.copyVector(this.position);\n\t\n\t\tthis.emit('updatestart', this.position);\n\t\n\t\tif (!this.targets.length && !this.attractors.length) {\n\t\t\treturn;\n\t\t}\n\t\n\t\tthis.attractorGoal.zero();\n\t\tthis.attractors.forEach(function (attractor) {\n\t\t\tvar distance;\n\t\t\tvar attraction = 0;\n\t\t\tvar lastAttraction = attractor.attraction;\n\t\n\t\t\tattractor.prop.update(delta, tick);\n\t\t\tattractor.subject.update(delta, tick);\n\t\n\t\t\tdistance = attractor.prop.position.distance(attractor.subject.position);\n\t\t\tif (distance < attractor.outerRadius) {\n\t\t\t\tattraction = Math.min(1, (attractor.outerRadius - distance) / (attractor.outerRadius - attractor.innerRadius));\n\t\t\t\ttotalAttraction = Math.max(totalAttraction, attraction * attractor.weight);\n\t\t\t\ttotalAttractionWeight += attractor.weight;\n\t\n\t\t\t\tattractor.offsetPosition.copyVector(attractor.subject.position).add(attractor.offset);\n\t\t\t\t_this.attractorGoal.scaleAndAdd(attractor.offsetPosition, attractor.weight);\n\t\n\t\t\t\tattractor.attraction = attraction;\n\t\t\t\tif (!lastAttraction) {\n\t\t\t\t\tattractor.prop.emit('enterattractor', attractor.subject, attraction);\n\t\t\t\t} else if (lastAttraction !== attraction) {\n\t\t\t\t\tattractor.prop.emit('moveattractor', attractor.subject, attraction);\n\t\t\t\t}\n\t\t\t} else if (attractor.attraction) {\n\t\t\t\tattractor.attraction = attraction;\n\t\t\t\tattractor.prop.emit('leaveattractor', attractor.subject);\n\t\t\t}\n\t\t});\n\t\tif (totalAttractionWeight) {\n\t\t\tthis.attractorGoal.scale(1 / totalAttractionWeight);\n\t\t}\n\t\n\t\ttotalWeight.zero();\n\t\tthis.goal.zero();\n\t\tif (totalAttraction < 1) {\n\t\t\tthis.targets.forEach(function (target) {\n\t\t\t\tvar distance;\n\t\n\t\t\t\ttarget.prop.update(delta, tick);\n\t\n\t\t\t\ttarget.offsetPosition.copyVector(target.prop.position).add(target.offset);\n\t\n\t\t\t\tscratch.copyVector(target.offsetPosition).subtract(_this.position); //vector towards target\n\t\n\t\t\t\ttarget.offsetPosition.copyVector(_this.position);\n\t\t\t\tdistance = scratch.length();\n\t\t\t\tif (distance > target.radius) {\n\t\t\t\t\tscratch.normalize().scale(distance - target.radius);\n\t\t\t\t\ttarget.offsetPosition.add(scratch);\n\t\t\t\t}\n\t\n\t\t\t\ttarget.offsetPosition.multiply(target.weight);\n\t\t\t\t_this.goal.add(target.offsetPosition);\n\t\t\t\ttotalWeight.add(target.weight);\n\t\t\t});\n\t\t\tif (totalWeight.length()) {\n\t\t\t\tsafeDivide(this.goal, totalWeight);\n\t\t\t}\n\t\t\tif (totalAttraction) {\n\t\t\t\tthis.goal.lerp(this.attractorGoal, totalAttraction);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.goal.copyVector(this.attractorGoal);\n\t\t}\n\t\n\t\tthis.velocity.copyVector(this.goal).subtract(this.position);\n\t\tif (this.lag) {\n\t\t\tthis.velocity.scale(Math.pow(delta, this.lag));\n\t\t}\n\t\n\t\t//cap velocity to maxSpeed\n\t\tif (this.maxSpeed && this.maxSpeed < Infinity && this.maxSpeed < this.velocity.length()) {\n\t\t\tthis.velocity.normalize().scale(this.maxSpeed);\n\t\t}\n\t\n\t\tthis.emit('update', this.position, this.velocity);\n\t\n\t\tthis.position.add(this.velocity);\n\t\n\t\t//fit within bounds\n\t\tthis.position.min(this.maxBounds).max(this.minBounds);\n\t\n\t\tthis.emit('updated', this.position);\n\t\n\t\treturn this;\n\t};\n\t\n\tProp.prototype.active = function (epsilon) {\n\t\treturn this.position.distance(this.lastPosition) > (epsilon || 0.00001);\n\t};\n\t\n\tfunction Dolly() {\n\t\tvar tick = -1;\n\t\tvar props = [];\n\t\tvar updating = false;\n\t\tvar self = this;\n\t\n\t\tthis.update = function (delta) {\n\t\t\tif (updating) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdating = true;\n\t\n\t\t\ttick++;\n\t\t\tprops.forEach(function (prop) {\n\t\t\t\tprop.update(delta, tick);\n\t\t\t});\n\t\n\t\t\tupdating = false;\n\t\n\t\t\treturn self;\n\t\t};\n\t\n\t\tthis.prop = function (options) {\n\t\t\tvar prop = new Prop(options);\n\t\t\tprops.push(prop);\n\t\t\treturn prop;\n\t\t};\n\t\n\t\tthis.active = function (epsilon) {\n\t\t\tvar i;\n\t\t\tfor (i = 0; i < props.length; i++) {\n\t\t\t\tif (props[i].active(epsilon)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\t\n\tmodule.exports = Dolly;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t//dependencies\n\tvar vec3 = __webpack_require__(4);\n\t\n\tfunction Vector(x, y, z) {\n\t\tvar _this = this;\n\t\n\t\tthis.vec = vec3.fromValues(x || 0, y || 0, z || 0);\n\t\n\t\tObject.defineProperties(this, {\n\t\t\tx: {\n\t\t\t\twriteable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn _this.vec[0];\n\t\t\t\t},\n\t\t\t\tset: function set(val) {\n\t\t\t\t\treturn _this.vec[0] = val;\n\t\t\t\t}\n\t\t\t},\n\t\t\ty: {\n\t\t\t\twriteable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn _this.vec[1];\n\t\t\t\t},\n\t\t\t\tset: function set(val) {\n\t\t\t\t\treturn _this.vec[1] = val;\n\t\t\t\t}\n\t\t\t},\n\t\t\tz: {\n\t\t\t\twriteable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\tget: function get() {\n\t\t\t\t\treturn _this.vec[2];\n\t\t\t\t},\n\t\t\t\tset: function set(val) {\n\t\t\t\t\treturn _this.vec[2] = val;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\t\n\tVector.prototype.toString = function () {\n\t\treturn vec3.str(this.vec);\n\t};\n\t\n\tVector.prototype.clone = function (v) {\n\t\treturn new Vector(v.x, v.y, v.z);\n\t};\n\t\n\tVector.prototype.copy = function (v) {\n\t\tif (v instanceof Vector) {\n\t\t\tvec3.copy(this.vec, v.vec);\n\t\t} else if (typeof v === 'object' && v) {\n\t\t\tthis.set(v.x || 0, v.y || 0, v.z || 0);\n\t\t}\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.copyVector = function (v) {\n\t\tvec3.copy(this.vec, v.vec);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.zero = function () {\n\t\tvec3.set(this.vec, 0, 0, 0);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.set = function (x, y, z) {\n\t\tvec3.set(this.vec, x, y, z);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.negate = function () {\n\t\tvec3.negate(this.vec, this.vec);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.normalize = function () {\n\t\tvec3.normalize(this.vec, this.vec);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.scale = function (scale) {\n\t\tvec3.scale(this.vec, this.vec, scale);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.scaleAndAdd = function (v, scale) {\n\t\tvec3.scaleAndAdd(this.vec, this.vec, v.vec, scale);\n\t\treturn this;\n\t};\n\t\n\tVector.prototype.lerp = function (v, t) {\n\t\tvec3.lerp(this.vec, this.vec, v.vec, t);\n\t\treturn this;\n\t};\n\t\n\t//wrap functions that operate on `this` and another vector\n\t['add', 'cross', 'divide', 'max', 'min', 'multiply', 'subtract'].forEach(function (key) {\n\t\tvar fn = vec3[key];\n\t\tVector.prototype[key] = function (v) {\n\t\t\tfn(this.vec, this.vec, v.vec);\n\t\t\treturn this;\n\t\t};\n\t});\n\t\n\tVector.prototype.length = function () {\n\t\treturn vec3.length(this.vec);\n\t};\n\t\n\tVector.prototype.squaredLength = function () {\n\t\treturn vec3.squaredLength(this.vec);\n\t};\n\t\n\t//wrap functions that return a number based on this and another vector\n\t['distance', 'dot', 'squaredDistance'].forEach(function (key) {\n\t\tvar fn = vec3[key];\n\t\tVector.prototype[key] = function (v) {\n\t\t\treturn fn(this.vec, v.vec);\n\t\t};\n\t});\n\t\n\tVector.fromArray = function (array) {\n\t\treturn new Vector.apply(null, array);\n\t};\n\t\n\tVector.clone = function (v) {\n\t\treturn new Vector(v.x, v.y, v.z);\n\t};\n\t\n\tmodule.exports = Vector;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\t\n\tRedistribution and use in source and binary forms, with or without modification,\n\tare permitted provided that the following conditions are met:\n\t\n\t  * Redistributions of source code must retain the above copyright notice, this\n\t    list of conditions and the following disclaimer.\n\t  * Redistributions in binary form must reproduce the above copyright notice,\n\t    this list of conditions and the following disclaimer in the documentation \n\t    and/or other materials provided with the distribution.\n\t\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n\tANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n\tWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE \n\tDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n\tANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n\t(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n\tLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n\tANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n\tSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\t\n\t/**\n\t * @class 3 Dimensional Vector\n\t * @name vec3\n\t */\n\tvar vec3 = {};\n\t\n\tvar GLMAT_ARRAY_TYPE = __webpack_require__(5).GLMAT_ARRAY_TYPE;\n\tvar GLMAT_RANDOM = __webpack_require__(5).GLMAT_RANDOM;\n\t\n\t/**\n\t * Creates a new, empty vec3\n\t *\n\t * @returns {vec3} a new 3D vector\n\t */\n\tvec3.create = function() {\n\t    var out = new GLMAT_ARRAY_TYPE(3);\n\t    out[0] = 0;\n\t    out[1] = 0;\n\t    out[2] = 0;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Creates a new vec3 initialized with values from an existing vector\n\t *\n\t * @param {vec3} a vector to clone\n\t * @returns {vec3} a new 3D vector\n\t */\n\tvec3.clone = function(a) {\n\t    var out = new GLMAT_ARRAY_TYPE(3);\n\t    out[0] = a[0];\n\t    out[1] = a[1];\n\t    out[2] = a[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Creates a new vec3 initialized with the given values\n\t *\n\t * @param {Number} x X component\n\t * @param {Number} y Y component\n\t * @param {Number} z Z component\n\t * @returns {vec3} a new 3D vector\n\t */\n\tvec3.fromValues = function(x, y, z) {\n\t    var out = new GLMAT_ARRAY_TYPE(3);\n\t    out[0] = x;\n\t    out[1] = y;\n\t    out[2] = z;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Copy the values from one vec3 to another\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the source vector\n\t * @returns {vec3} out\n\t */\n\tvec3.copy = function(out, a) {\n\t    out[0] = a[0];\n\t    out[1] = a[1];\n\t    out[2] = a[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Set the components of a vec3 to the given values\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {Number} x X component\n\t * @param {Number} y Y component\n\t * @param {Number} z Z component\n\t * @returns {vec3} out\n\t */\n\tvec3.set = function(out, x, y, z) {\n\t    out[0] = x;\n\t    out[1] = y;\n\t    out[2] = z;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Adds two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.add = function(out, a, b) {\n\t    out[0] = a[0] + b[0];\n\t    out[1] = a[1] + b[1];\n\t    out[2] = a[2] + b[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Subtracts vector b from vector a\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.subtract = function(out, a, b) {\n\t    out[0] = a[0] - b[0];\n\t    out[1] = a[1] - b[1];\n\t    out[2] = a[2] - b[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.subtract}\n\t * @function\n\t */\n\tvec3.sub = vec3.subtract;\n\t\n\t/**\n\t * Multiplies two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.multiply = function(out, a, b) {\n\t    out[0] = a[0] * b[0];\n\t    out[1] = a[1] * b[1];\n\t    out[2] = a[2] * b[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.multiply}\n\t * @function\n\t */\n\tvec3.mul = vec3.multiply;\n\t\n\t/**\n\t * Divides two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.divide = function(out, a, b) {\n\t    out[0] = a[0] / b[0];\n\t    out[1] = a[1] / b[1];\n\t    out[2] = a[2] / b[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.divide}\n\t * @function\n\t */\n\tvec3.div = vec3.divide;\n\t\n\t/**\n\t * Returns the minimum of two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.min = function(out, a, b) {\n\t    out[0] = Math.min(a[0], b[0]);\n\t    out[1] = Math.min(a[1], b[1]);\n\t    out[2] = Math.min(a[2], b[2]);\n\t    return out;\n\t};\n\t\n\t/**\n\t * Returns the maximum of two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.max = function(out, a, b) {\n\t    out[0] = Math.max(a[0], b[0]);\n\t    out[1] = Math.max(a[1], b[1]);\n\t    out[2] = Math.max(a[2], b[2]);\n\t    return out;\n\t};\n\t\n\t/**\n\t * Scales a vec3 by a scalar number\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the vector to scale\n\t * @param {Number} b amount to scale the vector by\n\t * @returns {vec3} out\n\t */\n\tvec3.scale = function(out, a, b) {\n\t    out[0] = a[0] * b;\n\t    out[1] = a[1] * b;\n\t    out[2] = a[2] * b;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Adds two vec3's after scaling the second operand by a scalar value\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @param {Number} scale the amount to scale b by before adding\n\t * @returns {vec3} out\n\t */\n\tvec3.scaleAndAdd = function(out, a, b, scale) {\n\t    out[0] = a[0] + (b[0] * scale);\n\t    out[1] = a[1] + (b[1] * scale);\n\t    out[2] = a[2] + (b[2] * scale);\n\t    return out;\n\t};\n\t\n\t/**\n\t * Calculates the euclidian distance between two vec3's\n\t *\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {Number} distance between a and b\n\t */\n\tvec3.distance = function(a, b) {\n\t    var x = b[0] - a[0],\n\t        y = b[1] - a[1],\n\t        z = b[2] - a[2];\n\t    return Math.sqrt(x*x + y*y + z*z);\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.distance}\n\t * @function\n\t */\n\tvec3.dist = vec3.distance;\n\t\n\t/**\n\t * Calculates the squared euclidian distance between two vec3's\n\t *\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {Number} squared distance between a and b\n\t */\n\tvec3.squaredDistance = function(a, b) {\n\t    var x = b[0] - a[0],\n\t        y = b[1] - a[1],\n\t        z = b[2] - a[2];\n\t    return x*x + y*y + z*z;\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.squaredDistance}\n\t * @function\n\t */\n\tvec3.sqrDist = vec3.squaredDistance;\n\t\n\t/**\n\t * Calculates the length of a vec3\n\t *\n\t * @param {vec3} a vector to calculate length of\n\t * @returns {Number} length of a\n\t */\n\tvec3.length = function (a) {\n\t    var x = a[0],\n\t        y = a[1],\n\t        z = a[2];\n\t    return Math.sqrt(x*x + y*y + z*z);\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.length}\n\t * @function\n\t */\n\tvec3.len = vec3.length;\n\t\n\t/**\n\t * Calculates the squared length of a vec3\n\t *\n\t * @param {vec3} a vector to calculate squared length of\n\t * @returns {Number} squared length of a\n\t */\n\tvec3.squaredLength = function (a) {\n\t    var x = a[0],\n\t        y = a[1],\n\t        z = a[2];\n\t    return x*x + y*y + z*z;\n\t};\n\t\n\t/**\n\t * Alias for {@link vec3.squaredLength}\n\t * @function\n\t */\n\tvec3.sqrLen = vec3.squaredLength;\n\t\n\t/**\n\t * Negates the components of a vec3\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a vector to negate\n\t * @returns {vec3} out\n\t */\n\tvec3.negate = function(out, a) {\n\t    out[0] = -a[0];\n\t    out[1] = -a[1];\n\t    out[2] = -a[2];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Normalize a vec3\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a vector to normalize\n\t * @returns {vec3} out\n\t */\n\tvec3.normalize = function(out, a) {\n\t    var x = a[0],\n\t        y = a[1],\n\t        z = a[2];\n\t    var len = x*x + y*y + z*z;\n\t    if (len > 0) {\n\t        //TODO: evaluate use of glm_invsqrt here?\n\t        len = 1 / Math.sqrt(len);\n\t        out[0] = a[0] * len;\n\t        out[1] = a[1] * len;\n\t        out[2] = a[2] * len;\n\t    }\n\t    return out;\n\t};\n\t\n\t/**\n\t * Calculates the dot product of two vec3's\n\t *\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {Number} dot product of a and b\n\t */\n\tvec3.dot = function (a, b) {\n\t    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n\t};\n\t\n\t/**\n\t * Computes the cross product of two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @returns {vec3} out\n\t */\n\tvec3.cross = function(out, a, b) {\n\t    var ax = a[0], ay = a[1], az = a[2],\n\t        bx = b[0], by = b[1], bz = b[2];\n\t\n\t    out[0] = ay * bz - az * by;\n\t    out[1] = az * bx - ax * bz;\n\t    out[2] = ax * by - ay * bx;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Performs a linear interpolation between two vec3's\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the first operand\n\t * @param {vec3} b the second operand\n\t * @param {Number} t interpolation amount between the two inputs\n\t * @returns {vec3} out\n\t */\n\tvec3.lerp = function (out, a, b, t) {\n\t    var ax = a[0],\n\t        ay = a[1],\n\t        az = a[2];\n\t    out[0] = ax + t * (b[0] - ax);\n\t    out[1] = ay + t * (b[1] - ay);\n\t    out[2] = az + t * (b[2] - az);\n\t    return out;\n\t};\n\t\n\t/**\n\t * Generates a random vector with the given scale\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n\t * @returns {vec3} out\n\t */\n\tvec3.random = function (out, scale) {\n\t    scale = scale || 1.0;\n\t\n\t    var r = GLMAT_RANDOM() * 2.0 * Math.PI;\n\t    var z = (GLMAT_RANDOM() * 2.0) - 1.0;\n\t    var zScale = Math.sqrt(1.0-z*z) * scale;\n\t\n\t    out[0] = Math.cos(r) * zScale;\n\t    out[1] = Math.sin(r) * zScale;\n\t    out[2] = z * scale;\n\t    return out;\n\t};\n\t\n\t/**\n\t * Transforms the vec3 with a mat4.\n\t * 4th vector component is implicitly '1'\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the vector to transform\n\t * @param {mat4} m matrix to transform with\n\t * @returns {vec3} out\n\t */\n\tvec3.transformMat4 = function(out, a, m) {\n\t    var x = a[0], y = a[1], z = a[2];\n\t    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12];\n\t    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13];\n\t    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Transforms the vec3 with a mat3.\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the vector to transform\n\t * @param {mat4} m the 3x3 matrix to transform with\n\t * @returns {vec3} out\n\t */\n\tvec3.transformMat3 = function(out, a, m) {\n\t    var x = a[0], y = a[1], z = a[2];\n\t    out[0] = x * m[0] + y * m[3] + z * m[6];\n\t    out[1] = x * m[1] + y * m[4] + z * m[7];\n\t    out[2] = x * m[2] + y * m[5] + z * m[8];\n\t    return out;\n\t};\n\t\n\t/**\n\t * Transforms the vec3 with a quat\n\t *\n\t * @param {vec3} out the receiving vector\n\t * @param {vec3} a the vector to transform\n\t * @param {quat} q quaternion to transform with\n\t * @returns {vec3} out\n\t */\n\tvec3.transformQuat = function(out, a, q) {\n\t    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\t\n\t    var x = a[0], y = a[1], z = a[2],\n\t        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\t\n\t        // calculate quat * vec\n\t        ix = qw * x + qy * z - qz * y,\n\t        iy = qw * y + qz * x - qx * z,\n\t        iz = qw * z + qx * y - qy * x,\n\t        iw = -qx * x - qy * y - qz * z;\n\t\n\t    // calculate result * inverse quat\n\t    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n\t    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n\t    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n\t    return out;\n\t};\n\t\n\t/*\n\t* Rotate a 3D vector around the x-axis\n\t* @param {vec3} out The receiving vec3\n\t* @param {vec3} a The vec3 point to rotate\n\t* @param {vec3} b The origin of the rotation\n\t* @param {Number} c The angle of rotation\n\t* @returns {vec3} out\n\t*/\n\tvec3.rotateX = function(out, a, b, c){\n\t   var p = [], r=[];\n\t\t  //Translate point to the origin\n\t\t  p[0] = a[0] - b[0];\n\t\t  p[1] = a[1] - b[1];\n\t  \tp[2] = a[2] - b[2];\n\t\n\t\t  //perform rotation\n\t\t  r[0] = p[0];\n\t\t  r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n\t\t  r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\t\n\t\t  //translate to correct position\n\t\t  out[0] = r[0] + b[0];\n\t\t  out[1] = r[1] + b[1];\n\t\t  out[2] = r[2] + b[2];\n\t\n\t  \treturn out;\n\t};\n\t\n\t/*\n\t* Rotate a 3D vector around the y-axis\n\t* @param {vec3} out The receiving vec3\n\t* @param {vec3} a The vec3 point to rotate\n\t* @param {vec3} b The origin of the rotation\n\t* @param {Number} c The angle of rotation\n\t* @returns {vec3} out\n\t*/\n\tvec3.rotateY = function(out, a, b, c){\n\t  \tvar p = [], r=[];\n\t  \t//Translate point to the origin\n\t  \tp[0] = a[0] - b[0];\n\t  \tp[1] = a[1] - b[1];\n\t  \tp[2] = a[2] - b[2];\n\t  \n\t  \t//perform rotation\n\t  \tr[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n\t  \tr[1] = p[1];\n\t  \tr[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n\t  \n\t  \t//translate to correct position\n\t  \tout[0] = r[0] + b[0];\n\t  \tout[1] = r[1] + b[1];\n\t  \tout[2] = r[2] + b[2];\n\t  \n\t  \treturn out;\n\t};\n\t\n\t/*\n\t* Rotate a 3D vector around the z-axis\n\t* @param {vec3} out The receiving vec3\n\t* @param {vec3} a The vec3 point to rotate\n\t* @param {vec3} b The origin of the rotation\n\t* @param {Number} c The angle of rotation\n\t* @returns {vec3} out\n\t*/\n\tvec3.rotateZ = function(out, a, b, c){\n\t  \tvar p = [], r=[];\n\t  \t//Translate point to the origin\n\t  \tp[0] = a[0] - b[0];\n\t  \tp[1] = a[1] - b[1];\n\t  \tp[2] = a[2] - b[2];\n\t  \n\t  \t//perform rotation\n\t  \tr[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n\t  \tr[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n\t  \tr[2] = p[2];\n\t  \n\t  \t//translate to correct position\n\t  \tout[0] = r[0] + b[0];\n\t  \tout[1] = r[1] + b[1];\n\t  \tout[2] = r[2] + b[2];\n\t  \n\t  \treturn out;\n\t};\n\t\n\t/**\n\t * Perform some operation over an array of vec3s.\n\t *\n\t * @param {Array} a the array of vectors to iterate over\n\t * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n\t * @param {Number} offset Number of elements to skip at the beginning of the array\n\t * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n\t * @param {Function} fn Function to call for each vector in the array\n\t * @param {Object} [arg] additional argument to pass to fn\n\t * @returns {Array} a\n\t * @function\n\t */\n\tvec3.forEach = (function() {\n\t    var vec = vec3.create();\n\t\n\t    return function(a, stride, offset, count, fn, arg) {\n\t        var i, l;\n\t        if(!stride) {\n\t            stride = 3;\n\t        }\n\t\n\t        if(!offset) {\n\t            offset = 0;\n\t        }\n\t        \n\t        if(count) {\n\t            l = Math.min((count * stride) + offset, a.length);\n\t        } else {\n\t            l = a.length;\n\t        }\n\t\n\t        for(i = offset; i < l; i += stride) {\n\t            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n\t            fn(vec, vec, arg);\n\t            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n\t        }\n\t        \n\t        return a;\n\t    };\n\t})();\n\t\n\t/**\n\t * Returns a string representation of a vector\n\t *\n\t * @param {vec3} vec vector to represent as a string\n\t * @returns {String} string representation of the vector\n\t */\n\tvec3.str = function (a) {\n\t    return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n\t};\n\t\n\tmodule.exports = vec3;\n\t\n\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\t\n\tRedistribution and use in source and binary forms, with or without modification,\n\tare permitted provided that the following conditions are met:\n\t\n\t  * Redistributions of source code must retain the above copyright notice, this\n\t    list of conditions and the following disclaimer.\n\t  * Redistributions in binary form must reproduce the above copyright notice,\n\t    this list of conditions and the following disclaimer in the documentation \n\t    and/or other materials provided with the distribution.\n\t\n\tTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n\tANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n\tWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE \n\tDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\n\tANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n\t(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n\tLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\n\tANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n\tSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\t\n\tif(!GLMAT_EPSILON) {\n\t    var GLMAT_EPSILON = 0.000001;\n\t}\n\t\n\tif(!GLMAT_ARRAY_TYPE) {\n\t    var GLMAT_ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n\t}\n\t\n\tif(!GLMAT_RANDOM) {\n\t    var GLMAT_RANDOM = Math.random;\n\t}\n\t\n\t/**\n\t * @class Common utilities\n\t * @name glMatrix\n\t */\n\tvar glMatrix = {};\n\t\n\t/**\n\t * Sets the type of array used when creating new vectors and matricies\n\t *\n\t * @param {Type} type Array type, such as Float32Array or Array\n\t */\n\tglMatrix.setMatrixArrayType = function(type) {\n\t    GLMAT_ARRAY_TYPE = type;\n\t}\n\t\n\t\n\tvar degree = Math.PI / 180;\n\t\n\t/**\n\t* Convert Degree To Radian\n\t*\n\t* @param {Number} Angle in Degrees\n\t*/\n\tglMatrix.toRadian = function(a){\n\t     return a * degree;\n\t}\n\t\n\tmodule.exports = {\n\t  GLMAT_EPSILON : GLMAT_EPSILON,\n\t  GLMAT_ARRAY_TYPE : GLMAT_ARRAY_TYPE,\n\t  GLMAT_RANDOM : GLMAT_RANDOM,\n\t  glMatrix : glMatrix\n\t};\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\tvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\t\n\tfunction ToObject(val) {\n\t\tif (val == null) {\n\t\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t\t}\n\t\n\t\treturn Object(val);\n\t}\n\t\n\tfunction ownEnumerableKeys(obj) {\n\t\tvar keys = Object.getOwnPropertyNames(obj);\n\t\n\t\tif (Object.getOwnPropertySymbols) {\n\t\t\tkeys = keys.concat(Object.getOwnPropertySymbols(obj));\n\t\t}\n\t\n\t\treturn keys.filter(function (key) {\n\t\t\treturn propIsEnumerable.call(obj, key);\n\t\t});\n\t}\n\t\n\tmodule.exports = Object.assign || function (target, source) {\n\t\tvar from;\n\t\tvar keys;\n\t\tvar to = ToObject(target);\n\t\n\t\tfor (var s = 1; s < arguments.length; s++) {\n\t\t\tfrom = arguments[s];\n\t\t\tkeys = ownEnumerableKeys(Object(from));\n\t\n\t\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\t\tto[keys[i]] = from[keys[i]];\n\t\t\t}\n\t\t}\n\t\n\t\treturn to;\n\t};\n\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar d        = __webpack_require__(8)\n\t  , callable = __webpack_require__(21)\n\t\n\t  , apply = Function.prototype.apply, call = Function.prototype.call\n\t  , create = Object.create, defineProperty = Object.defineProperty\n\t  , defineProperties = Object.defineProperties\n\t  , hasOwnProperty = Object.prototype.hasOwnProperty\n\t  , descriptor = { configurable: true, enumerable: false, writable: true }\n\t\n\t  , on, once, off, emit, methods, descriptors, base;\n\t\n\ton = function (type, listener) {\n\t\tvar data;\n\t\n\t\tcallable(listener);\n\t\n\t\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\t\tdata = descriptor.value = create(null);\n\t\t\tdefineProperty(this, '__ee__', descriptor);\n\t\t\tdescriptor.value = null;\n\t\t} else {\n\t\t\tdata = this.__ee__;\n\t\t}\n\t\tif (!data[type]) data[type] = listener;\n\t\telse if (typeof data[type] === 'object') data[type].push(listener);\n\t\telse data[type] = [data[type], listener];\n\t\n\t\treturn this;\n\t};\n\t\n\tonce = function (type, listener) {\n\t\tvar once, self;\n\t\n\t\tcallable(listener);\n\t\tself = this;\n\t\ton.call(this, type, once = function () {\n\t\t\toff.call(self, type, once);\n\t\t\tapply.call(listener, this, arguments);\n\t\t});\n\t\n\t\tonce.__eeOnceListener__ = listener;\n\t\treturn this;\n\t};\n\t\n\toff = function (type, listener) {\n\t\tvar data, listeners, candidate, i;\n\t\n\t\tcallable(listener);\n\t\n\t\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\t\tdata = this.__ee__;\n\t\tif (!data[type]) return this;\n\t\tlisteners = data[type];\n\t\n\t\tif (typeof listeners === 'object') {\n\t\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\t\telse listeners.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif ((listeners === listener) ||\n\t\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\t\tdelete data[type];\n\t\t\t}\n\t\t}\n\t\n\t\treturn this;\n\t};\n\t\n\temit = function (type) {\n\t\tvar i, l, listener, listeners, args;\n\t\n\t\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\t\tlisteners = this.__ee__[type];\n\t\tif (!listeners) return;\n\t\n\t\tif (typeof listeners === 'object') {\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\t\n\t\t\tlisteners = listeners.slice();\n\t\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\t\tapply.call(listener, this, args);\n\t\t\t}\n\t\t} else {\n\t\t\tswitch (arguments.length) {\n\t\t\tcase 1:\n\t\t\t\tcall.call(listeners, this);\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\t\tbreak;\n\t\t\tcase 3:\n\t\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tl = arguments.length;\n\t\t\t\targs = new Array(l - 1);\n\t\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t\t}\n\t\t\t\tapply.call(listeners, this, args);\n\t\t\t}\n\t\t}\n\t};\n\t\n\tmethods = {\n\t\ton: on,\n\t\tonce: once,\n\t\toff: off,\n\t\temit: emit\n\t};\n\t\n\tdescriptors = {\n\t\ton: d(on),\n\t\tonce: d(once),\n\t\toff: d(off),\n\t\temit: d(emit)\n\t};\n\t\n\tbase = defineProperties({}, descriptors);\n\t\n\tmodule.exports = exports = function (o) {\n\t\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n\t};\n\texports.methods = methods;\n\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar assign        = __webpack_require__(9)\n\t  , normalizeOpts = __webpack_require__(16)\n\t  , isCallable    = __webpack_require__(17)\n\t  , contains      = __webpack_require__(18)\n\t\n\t  , d;\n\t\n\td = module.exports = function (dscr, value/*, options*/) {\n\t\tvar c, e, w, options, desc;\n\t\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\t\toptions = value;\n\t\t\tvalue = dscr;\n\t\t\tdscr = null;\n\t\t} else {\n\t\t\toptions = arguments[2];\n\t\t}\n\t\tif (dscr == null) {\n\t\t\tc = w = true;\n\t\t\te = false;\n\t\t} else {\n\t\t\tc = contains.call(dscr, 'c');\n\t\t\te = contains.call(dscr, 'e');\n\t\t\tw = contains.call(dscr, 'w');\n\t\t}\n\t\n\t\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\t\treturn !options ? desc : assign(normalizeOpts(options), desc);\n\t};\n\t\n\td.gs = function (dscr, get, set/*, options*/) {\n\t\tvar c, e, options, desc;\n\t\tif (typeof dscr !== 'string') {\n\t\t\toptions = set;\n\t\t\tset = get;\n\t\t\tget = dscr;\n\t\t\tdscr = null;\n\t\t} else {\n\t\t\toptions = arguments[3];\n\t\t}\n\t\tif (get == null) {\n\t\t\tget = undefined;\n\t\t} else if (!isCallable(get)) {\n\t\t\toptions = get;\n\t\t\tget = set = undefined;\n\t\t} else if (set == null) {\n\t\t\tset = undefined;\n\t\t} else if (!isCallable(set)) {\n\t\t\toptions = set;\n\t\t\tset = undefined;\n\t\t}\n\t\tif (dscr == null) {\n\t\t\tc = true;\n\t\t\te = false;\n\t\t} else {\n\t\t\tc = contains.call(dscr, 'c');\n\t\t\te = contains.call(dscr, 'e');\n\t\t}\n\t\n\t\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\t\treturn !options ? desc : assign(normalizeOpts(options), desc);\n\t};\n\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(10)()\n\t\t? Object.assign\n\t\t: __webpack_require__(11);\n\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t\tvar assign = Object.assign, obj;\n\t\tif (typeof assign !== 'function') return false;\n\t\tobj = { foo: 'raz' };\n\t\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\t\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n\t};\n\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar keys  = __webpack_require__(12)\n\t  , value = __webpack_require__(15)\n\t\n\t  , max = Math.max;\n\t\n\tmodule.exports = function (dest, src/*, srcn*/) {\n\t\tvar error, i, l = max(arguments.length, 2), assign;\n\t\tdest = Object(value(dest));\n\t\tassign = function (key) {\n\t\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\t\tif (!error) error = e;\n\t\t\t}\n\t\t};\n\t\tfor (i = 1; i < l; ++i) {\n\t\t\tsrc = arguments[i];\n\t\t\tkeys(src).forEach(assign);\n\t\t}\n\t\tif (error !== undefined) throw error;\n\t\treturn dest;\n\t};\n\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(13)()\n\t\t? Object.keys\n\t\t: __webpack_require__(14);\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function () {\n\t\ttry {\n\t\t\tObject.keys('primitive');\n\t\t\treturn true;\n\t\t} catch (e) { return false; }\n\t};\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar keys = Object.keys;\n\t\n\tmodule.exports = function (object) {\n\t\treturn keys(object == null ? object : Object(object));\n\t};\n\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (value) {\n\t\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\t\treturn value;\n\t};\n\n\n/***/ },\n/* 16 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar forEach = Array.prototype.forEach, create = Object.create;\n\t\n\tvar process = function (src, obj) {\n\t\tvar key;\n\t\tfor (key in src) obj[key] = src[key];\n\t};\n\t\n\tmodule.exports = function (options/*, options*/) {\n\t\tvar result = create(null);\n\t\tforEach.call(arguments, function (options) {\n\t\t\tif (options == null) return;\n\t\t\tprocess(Object(options), result);\n\t\t});\n\t\treturn result;\n\t};\n\n\n/***/ },\n/* 17 */\n/***/ function(module, exports) {\n\n\t// Deprecated\n\t\n\t'use strict';\n\t\n\tmodule.exports = function (obj) { return typeof obj === 'function'; };\n\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tmodule.exports = __webpack_require__(19)()\n\t\t? String.prototype.contains\n\t\t: __webpack_require__(20);\n\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar str = 'razdwatrzy';\n\t\n\tmodule.exports = function () {\n\t\tif (typeof str.contains !== 'function') return false;\n\t\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n\t};\n\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar indexOf = String.prototype.indexOf;\n\t\n\tmodule.exports = function (searchString/*, position*/) {\n\t\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n\t};\n\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tmodule.exports = function (fn) {\n\t\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\t\treturn fn;\n\t};\n\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tif (typeof Map === \"undefined\") {\n\t  Map = function() { this.clear(); };\n\t  Map.prototype = {\n\t    set: function(k, v) { this._[k] = v; return this; },\n\t    get: function(k) { return this._[k]; },\n\t    has: function(k) { return k in this._; },\n\t    delete: function(k) { return k in this._ && delete this._[k]; },\n\t    clear: function() { this._ = Object.create(null); },\n\t    get size() { var n = 0; for (var k in this._) ++n; return n; },\n\t    forEach: function(c) { for (var k in this._) c(this._[k], k, this); }\n\t  };\n\t}\n\t\n\t(function (global, factory) {\n\t  true ? factory(exports) :\n\t  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n\t  factory((global.xhr = {}));\n\t}(this, function (exports) { 'use strict';\n\t\n\t  var dsv = function(delimiter) {\n\t    var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n]\"),\n\t        delimiterCode = delimiter.charCodeAt(0);\n\t\n\t    function parse(text, f) {\n\t      var o;\n\t      return parseRows(text, function(row, i) {\n\t        if (o) return o(row, i - 1);\n\t        var a = new Function(\"d\", \"return {\" + row.map(function(name, i) {\n\t          return JSON.stringify(name) + \": d[\" + i + \"]\";\n\t        }).join(\",\") + \"}\");\n\t        o = f ? function(row, i) { return f(a(row), i); } : a;\n\t      });\n\t    }\n\t\n\t    function parseRows(text, f) {\n\t      var EOL = {}, // sentinel value for end-of-line\n\t          EOF = {}, // sentinel value for end-of-file\n\t          rows = [], // output rows\n\t          N = text.length,\n\t          I = 0, // current character index\n\t          n = 0, // the current line number\n\t          t, // the current token\n\t          eol; // is the current token followed by EOL?\n\t\n\t      function token() {\n\t        if (I >= N) return EOF; // special case: end of file\n\t        if (eol) return eol = false, EOL; // special case: end of line\n\t\n\t        // special case: quotes\n\t        var j = I;\n\t        if (text.charCodeAt(j) === 34) {\n\t          var i = j;\n\t          while (i++ < N) {\n\t            if (text.charCodeAt(i) === 34) {\n\t              if (text.charCodeAt(i + 1) !== 34) break;\n\t              ++i;\n\t            }\n\t          }\n\t          I = i + 2;\n\t          var c = text.charCodeAt(i + 1);\n\t          if (c === 13) {\n\t            eol = true;\n\t            if (text.charCodeAt(i + 2) === 10) ++I;\n\t          } else if (c === 10) {\n\t            eol = true;\n\t          }\n\t          return text.slice(j + 1, i).replace(/\"\"/g, \"\\\"\");\n\t        }\n\t\n\t        // common case: find next delimiter or newline\n\t        while (I < N) {\n\t          var c = text.charCodeAt(I++), k = 1;\n\t          if (c === 10) eol = true; // \\n\n\t          else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n\t          else if (c !== delimiterCode) continue;\n\t          return text.slice(j, I - k);\n\t        }\n\t\n\t        // special case: last token before EOF\n\t        return text.slice(j);\n\t      }\n\t\n\t      while ((t = token()) !== EOF) {\n\t        var a = [];\n\t        while (t !== EOL && t !== EOF) {\n\t          a.push(t);\n\t          t = token();\n\t        }\n\t        if (f && (a = f(a, n++)) == null) continue;\n\t        rows.push(a);\n\t      }\n\t\n\t      return rows;\n\t    }\n\t\n\t    function format(rows) {\n\t      if (Array.isArray(rows[0])) return formatRows(rows); // deprecated; use formatRows\n\t      var fieldSet = Object.create(null), fields = [];\n\t\n\t      // Compute unique fields in order of discovery.\n\t      rows.forEach(function(row) {\n\t        for (var field in row) {\n\t          if (!((field += \"\") in fieldSet)) {\n\t            fields.push(fieldSet[field] = field);\n\t          }\n\t        }\n\t      });\n\t\n\t      return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n\t        return fields.map(function(field) {\n\t          return formatValue(row[field]);\n\t        }).join(delimiter);\n\t      })).join(\"\\n\");\n\t    }\n\t\n\t    function formatRows(rows) {\n\t      return rows.map(formatRow).join(\"\\n\");\n\t    }\n\t\n\t    function formatRow(row) {\n\t      return row.map(formatValue).join(delimiter);\n\t    }\n\t\n\t    function formatValue(text) {\n\t      return reFormat.test(text) ? \"\\\"\" + text.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\" : text;\n\t    }\n\t\n\t    return {\n\t      parse: parse,\n\t      parseRows: parseRows,\n\t      format: format,\n\t      formatRows: formatRows\n\t    };\n\t  }\n\t\n\t  var tsv = dsv(\"\\t\");\n\t\n\t  function responseOf(dsv, row) {\n\t    return function(request) {\n\t      return dsv.parse(request.responseText, row);\n\t    };\n\t  }\n\t\n\t  function fixCallback(callback) {\n\t    return function(error, request) {\n\t      callback(error == null ? request : null);\n\t    };\n\t  }\n\t\n\t  function hasResponse(request) {\n\t    var type = request.responseType;\n\t    return type && type !== \"text\"\n\t        ? request.response // null on error\n\t        : request.responseText; // \"\" on error\n\t  }\n\t\n\t  function Dispatch(types) {\n\t    var i = -1,\n\t        n = types.length,\n\t        callbacksByType = {},\n\t        callbackByName = {},\n\t        type,\n\t        that = this;\n\t\n\t    that.on = function(type, callback) {\n\t      type = parseType(type);\n\t\n\t      // Return the current callback, if any.\n\t      if (arguments.length < 2) {\n\t        return (callback = callbackByName[type.name]) && callback.value;\n\t      }\n\t\n\t      // If a type was specified\n\t      if (type.type) {\n\t        var callbacks = callbacksByType[type.type],\n\t            callback0 = callbackByName[type.name],\n\t            i;\n\t\n\t        // Remove the current callback, if any, using copy-on-remove.\n\t        if (callback0) {\n\t          callback0.value = null;\n\t          i = callbacks.indexOf(callback0);\n\t          callbacksByType[type.type] = callbacks = callbacks.slice(0, i).concat(callbacks.slice(i + 1));\n\t          delete callbackByName[type.name];\n\t        }\n\t\n\t        // Add the new callback, if any.\n\t        if (callback) {\n\t          callback = {value: callback};\n\t          callbackByName[type.name] = callback;\n\t          callbacks.push(callback);\n\t        }\n\t      }\n\t\n\t      // Otherwise, if a null callback was specified, remove all callbacks with the given name.\n\t      else if (callback == null) {\n\t        for (var otherType in callbacksByType) {\n\t          if (callback = callbackByName[otherType + type.name]) {\n\t            callback.value = null;\n\t            var callbacks = callbacksByType[otherType], i = callbacks.indexOf(callback);\n\t            callbacksByType[otherType] = callbacks.slice(0, i).concat(callbacks.slice(i + 1));\n\t            delete callbackByName[callback.name];\n\t          }\n\t        }\n\t      }\n\t\n\t      return that;\n\t    };\n\t\n\t    while (++i < n) {\n\t      type = types[i] + \"\";\n\t      if (!type || (type in that)) throw new Error(\"illegal or duplicate type: \" + type);\n\t      callbacksByType[type] = [];\n\t      that[type] = applier(type);\n\t    }\n\t\n\t    function parseType(type) {\n\t      var i = (type += \"\").indexOf(\".\"), name = type;\n\t      if (i >= 0) type = type.slice(0, i); else name += \".\";\n\t      if (type && !callbacksByType.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n\t      return {type: type, name: name};\n\t    }\n\t\n\t    function applier(type) {\n\t      return function() {\n\t        var callbacks = callbacksByType[type], // Defensive reference; copy-on-remove.\n\t            callback,\n\t            callbackValue,\n\t            i = -1,\n\t            n = callbacks.length;\n\t\n\t        while (++i < n) {\n\t          if (callbackValue = (callback = callbacks[i]).value) {\n\t            callbackValue.apply(this, arguments);\n\t          }\n\t        }\n\t\n\t        return that;\n\t      };\n\t    }\n\t  }\n\t\n\t  function dispatch() {\n\t    return new Dispatch(arguments);\n\t  }\n\t\n\t  dispatch.prototype = Dispatch.prototype; // allow instanceof\n\t\n\t  var xhr = function(url, callback) {\n\t    var xhr,\n\t        event = dispatch(\"beforesend\", \"progress\", \"load\", \"error\"),\n\t        mimeType,\n\t        headers = new Map,\n\t        request = new XMLHttpRequest,\n\t        response,\n\t        responseType;\n\t\n\t    // If IE does not support CORS, use XDomainRequest.\n\t    if (typeof XDomainRequest !== \"undefined\"\n\t        && !(\"withCredentials\" in request)\n\t        && /^(http(s)?:)?\\/\\//.test(url)) request = new XDomainRequest;\n\t\n\t    \"onload\" in request\n\t        ? request.onload = request.onerror = respond\n\t        : request.onreadystatechange = function() { request.readyState > 3 && respond(); };\n\t\n\t    function respond() {\n\t      var status = request.status, result;\n\t      if (!status && hasResponse(request)\n\t          || status >= 200 && status < 300\n\t          || status === 304) {\n\t        if (response) {\n\t          try {\n\t            result = response.call(xhr, request);\n\t          } catch (e) {\n\t            event.error.call(xhr, e);\n\t            return;\n\t          }\n\t        } else {\n\t          result = request;\n\t        }\n\t        event.load.call(xhr, result);\n\t      } else {\n\t        event.error.call(xhr, request);\n\t      }\n\t    }\n\t\n\t    request.onprogress = function(e) {\n\t      event.progress.call(xhr, e);\n\t    };\n\t\n\t    xhr = {\n\t      header: function(name, value) {\n\t        name = (name + \"\").toLowerCase();\n\t        if (arguments.length < 2) return headers.get(name);\n\t        if (value == null) headers.delete(name);\n\t        else headers.set(name, value + \"\");\n\t        return xhr;\n\t      },\n\t\n\t      // If mimeType is non-null and no Accept header is set, a default is used.\n\t      mimeType: function(value) {\n\t        if (!arguments.length) return mimeType;\n\t        mimeType = value == null ? null : value + \"\";\n\t        return xhr;\n\t      },\n\t\n\t      // Specifies what type the response value should take;\n\t      // for instance, arraybuffer, blob, document, or text.\n\t      responseType: function(value) {\n\t        if (!arguments.length) return responseType;\n\t        responseType = value;\n\t        return xhr;\n\t      },\n\t\n\t      // Specify how to convert the response content to a specific type;\n\t      // changes the callback value on \"load\" events.\n\t      response: function(value) {\n\t        response = value;\n\t        return xhr;\n\t      },\n\t\n\t      // Alias for send(\"GET\", ).\n\t      get: function(data, callback) {\n\t        return xhr.send(\"GET\", data, callback);\n\t      },\n\t\n\t      // Alias for send(\"POST\", ).\n\t      post: function(data, callback) {\n\t        return xhr.send(\"POST\", data, callback);\n\t      },\n\t\n\t      // If callback is non-null, it will be used for error and load events.\n\t      send: function(method, data, callback) {\n\t        if (!callback && typeof data === \"function\") callback = data, data = null;\n\t        if (callback && callback.length === 1) callback = fixCallback(callback);\n\t        request.open(method, url, true);\n\t        if (mimeType != null && !headers.has(\"accept\")) headers.set(\"accept\", mimeType + \",*/*\");\n\t        if (request.setRequestHeader) headers.forEach(function(value, name) { request.setRequestHeader(name, value); });\n\t        if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);\n\t        if (responseType != null) request.responseType = responseType;\n\t        if (callback) xhr.on(\"error\", callback).on(\"load\", function(request) { callback(null, request); });\n\t        event.beforesend.call(xhr, request);\n\t        request.send(data == null ? null : data);\n\t        return xhr;\n\t      },\n\t\n\t      abort: function() {\n\t        request.abort();\n\t        return xhr;\n\t      },\n\t\n\t      on: function() {\n\t        var value = event.on.apply(event, arguments);\n\t        return value === event ? xhr : value;\n\t      }\n\t    };\n\t\n\t    return callback\n\t        ? xhr.get(callback)\n\t        : xhr;\n\t  }\n\t\n\t  var xhrDsv = function(defaultMimeType, dsv) {\n\t    return function(url, row, callback) {\n\t      if (arguments.length < 3) callback = row, row = null;\n\t      var r = xhr(url).mimeType(defaultMimeType);\n\t      r.row = function(_) { return arguments.length ? r.response(responseOf(dsv, row = _)) : row; };\n\t      r.row(row);\n\t      return callback ? r.get(callback) : r;\n\t    };\n\t  }\n\t\n\t  var _tsv = xhrDsv(\"text/tab-separated-values\", tsv);\n\t\n\t  var csv = dsv(\",\");\n\t\n\t  var _csv = xhrDsv(\"text/csv\", csv);\n\t\n\t  var xhrType = function(defaultMimeType, response) {\n\t    return function(url, callback) {\n\t      var r = xhr(url).mimeType(defaultMimeType).response(response);\n\t      return callback ? r.get(callback) : r;\n\t    };\n\t  }\n\t\n\t  var xml = xhrType(\"application/xml\", function(request) {\n\t    return request.responseXML;\n\t  });\n\t\n\t  var text = xhrType(\"text/plain\", function(request) {\n\t    return request.responseText;\n\t  });\n\t\n\t  var json = xhrType(\"application/json\", function(request) {\n\t    return JSON.parse(request.responseText);\n\t  });\n\t\n\t  var html = xhrType(\"text/html\", function(request) {\n\t    return document.createRange().createContextualFragment(request.responseText);\n\t  });\n\t\n\t  exports.xhr = xhr;\n\t  exports.html = html;\n\t  exports.json = json;\n\t  exports.text = text;\n\t  exports.xml = xml;\n\t  exports.csv = _csv;\n\t  exports.tsv = _tsv;\n\t\n\t}));\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(haystack, needle, comparator, low, high) {\n\t  var mid, cmp;\n\t\n\t  if(low === undefined)\n\t    low = 0;\n\t\n\t  else {\n\t    low = low|0;\n\t    if(low < 0 || low >= haystack.length)\n\t      throw new RangeError(\"invalid lower bound\");\n\t  }\n\t\n\t  if(high === undefined)\n\t    high = haystack.length - 1;\n\t\n\t  else {\n\t    high = high|0;\n\t    if(high < low || high >= haystack.length)\n\t      throw new RangeError(\"invalid upper bound\");\n\t  }\n\t\n\t  while(low <= high) {\n\t    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n\t     * to double (which gives the wrong results). */\n\t    mid = low + (high - low >> 1);\n\t    cmp = +comparator(haystack[mid], needle);\n\t\n\t    /* Too low. */\n\t    if(cmp < 0.0) \n\t      low  = mid + 1;\n\t\n\t    /* Too high. */\n\t    else if(cmp > 0.0)\n\t      high = mid - 1;\n\t    \n\t    /* Key found. */\n\t    else\n\t      return mid;\n\t  }\n\t\n\t  /* Key not found. */\n\t  return ~low;\n\t}\n\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t// Based on this code: https://github.com/adamwdraper/Numeral-js/blob/master/numeral.js\r\n\t\r\n\t'use strict';\r\n\t\r\n\tvar merge = __webpack_require__(25);\r\n\t\r\n\tvar defaultOptions = {\r\n\t\tthousandsDelimeter: '',\r\n\t\tdecimalDelimeter: '.',\r\n\t\troundingFunction: Math.round\r\n\t};\r\n\t\r\n\tmodule.exports = function (number, format, options) {\r\n\t\treturn formatNumber(number, format, merge(true, defaultOptions, options));\r\n\t};\r\n\t\r\n\tfunction formatNumber(number, format, opts) {\r\n\t\tvar signed = false,\r\n\t\t\tnegative = false;\r\n\t\r\n\t\tvar whole = '',\r\n\t\t\tdivisional = '';\r\n\t\r\n\t\tif (format.indexOf('+') > -1) {\r\n\t\t\tsigned = true;\r\n\t\t\tformat = format.replace(/\\+/g, '');\r\n\t\t}\r\n\t\r\n\t\twhole = number.toString().split('.')[0];\r\n\t\tvar precision = format.split('.')[1];\r\n\t\tvar thousands = format.indexOf(',');\r\n\t\r\n\t\tif (precision) {\r\n\t\t\tif (precision.indexOf('[') > -1) {\r\n\t\t\t\tprecision = precision.replace(']', '');\r\n\t\t\t\tprecision = precision.split('[');\r\n\t\t\t\tdivisional = toFixed(number, (precision[0].length + precision[1].length), opts.roundingFunction, precision[1].length);\r\n\t\t\t} else {\r\n\t\t\t\tdivisional = toFixed(number, precision.length, opts.roundingFunction);\r\n\t\t\t}\r\n\t\r\n\t\t\twhole = divisional.split('.')[0];\r\n\t\r\n\t\t\tif (divisional.split('.')[1].length) {\r\n\t\t\t\tdivisional = opts.decimalDelimeter + divisional.split('.')[1];\r\n\t\t\t} else {\r\n\t\t\t\tdivisional = '';\r\n\t\t\t}\r\n\t\r\n\t\t} else {\r\n\t\t\twhole = toFixed(number, null, opts.roundingFunction);\r\n\t\t}\r\n\t\r\n\t\tif (whole.indexOf('-') > -1) {\r\n\t\t\twhole = whole.slice(1);\r\n\t\t\tnegative = true;\r\n\t\t}\r\n\t\r\n\t\tif (thousands > -1) {\r\n\t\t\twhole = whole.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' + opts.thousandsDelimeter);\r\n\t\t}\r\n\t\r\n\t\tif (format.indexOf('.') === 0) {\r\n\t\t\twhole = '';\r\n\t\t}\r\n\t\r\n\t\treturn (negative ? '-' : '') +\r\n\t\t       ((!negative && signed) ? '+' : '') +\r\n\t\t       whole + divisional;\r\n\t}\r\n\t\r\n\tfunction toFixed(value, precision, roundingFunction, optionals) {\r\n\t\tvar power = Math.pow(10, precision),\r\n\t\t\toptionalsRegExp,\r\n\t\t\toutput;\r\n\t\r\n\t\toutput = (roundingFunction(value * power) / power).toFixed(precision);\r\n\t\r\n\t\tif (optionals) {\r\n\t\t\toptionalsRegExp = new RegExp('0{1,' + optionals + '}$');\r\n\t\t\toutput = output.replace(optionalsRegExp, '');\r\n\t\t}\r\n\t\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t// console.log(formatNumber(Math.PI, '0.[000]', merge(defaultOptions, null)));\r\n\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(module) {/*!\r\n\t * @name JavaScript/NodeJS Merge v1.2.0\r\n\t * @author yeikos\r\n\t * @repository https://github.com/yeikos/js.merge\r\n\t\r\n\t * Copyright 2014 yeikos - MIT license\r\n\t * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n\t */\r\n\t\r\n\t;(function(isNode) {\r\n\t\r\n\t\t/**\r\n\t\t * Merge one or more objects \r\n\t\t * @param bool? clone\r\n\t\t * @param mixed,... arguments\r\n\t\t * @return object\r\n\t\t */\r\n\t\r\n\t\tvar Public = function(clone) {\r\n\t\r\n\t\t\treturn merge(clone === true, false, arguments);\r\n\t\r\n\t\t}, publicName = 'merge';\r\n\t\r\n\t\t/**\r\n\t\t * Merge two or more objects recursively \r\n\t\t * @param bool? clone\r\n\t\t * @param mixed,... arguments\r\n\t\t * @return object\r\n\t\t */\r\n\t\r\n\t\tPublic.recursive = function(clone) {\r\n\t\r\n\t\t\treturn merge(clone === true, true, arguments);\r\n\t\r\n\t\t};\r\n\t\r\n\t\t/**\r\n\t\t * Clone the input removing any reference\r\n\t\t * @param mixed input\r\n\t\t * @return mixed\r\n\t\t */\r\n\t\r\n\t\tPublic.clone = function(input) {\r\n\t\r\n\t\t\tvar output = input,\r\n\t\t\t\ttype = typeOf(input),\r\n\t\t\t\tindex, size;\r\n\t\r\n\t\t\tif (type === 'array') {\r\n\t\r\n\t\t\t\toutput = [];\r\n\t\t\t\tsize = input.length;\r\n\t\r\n\t\t\t\tfor (index=0;index<size;++index)\r\n\t\r\n\t\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\t\r\n\t\t\t} else if (type === 'object') {\r\n\t\r\n\t\t\t\toutput = {};\r\n\t\r\n\t\t\t\tfor (index in input)\r\n\t\r\n\t\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn output;\r\n\t\r\n\t\t};\r\n\t\r\n\t\t/**\r\n\t\t * Merge two objects recursively\r\n\t\t * @param mixed input\r\n\t\t * @param mixed extend\r\n\t\t * @return mixed\r\n\t\t */\r\n\t\r\n\t\tfunction merge_recursive(base, extend) {\r\n\t\r\n\t\t\tif (typeOf(base) !== 'object')\r\n\t\r\n\t\t\t\treturn extend;\r\n\t\r\n\t\t\tfor (var key in extend) {\r\n\t\r\n\t\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\t\r\n\t\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\t\r\n\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\tbase[key] = extend[key];\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn base;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Merge two or more objects\r\n\t\t * @param bool clone\r\n\t\t * @param bool recursive\r\n\t\t * @param array argv\r\n\t\t * @return object\r\n\t\t */\r\n\t\r\n\t\tfunction merge(clone, recursive, argv) {\r\n\t\r\n\t\t\tvar result = argv[0],\r\n\t\t\t\tsize = argv.length;\r\n\t\r\n\t\t\tif (clone || typeOf(result) !== 'object')\r\n\t\r\n\t\t\t\tresult = {};\r\n\t\r\n\t\t\tfor (var index=0;index<size;++index) {\r\n\t\r\n\t\t\t\tvar item = argv[index],\r\n\t\r\n\t\t\t\t\ttype = typeOf(item);\r\n\t\r\n\t\t\t\tif (type !== 'object') continue;\r\n\t\r\n\t\t\t\tfor (var key in item) {\r\n\t\r\n\t\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\t\r\n\t\t\t\t\tif (recursive) {\r\n\t\r\n\t\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\t\r\n\t\t\t\t\t} else {\r\n\t\r\n\t\t\t\t\t\tresult[key] = sitem;\r\n\t\r\n\t\t\t\t\t}\r\n\t\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}\r\n\t\r\n\t\t\treturn result;\r\n\t\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Get type of variable\r\n\t\t * @param mixed input\r\n\t\t * @return string\r\n\t\t *\r\n\t\t * @see http://jsperf.com/typeofvar\r\n\t\t */\r\n\t\r\n\t\tfunction typeOf(input) {\r\n\t\r\n\t\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\t\r\n\t\t}\r\n\t\r\n\t\tif (isNode) {\r\n\t\r\n\t\t\tmodule.exports = Public;\r\n\t\r\n\t\t} else {\r\n\t\r\n\t\t\twindow[publicName] = Public;\r\n\t\r\n\t\t}\r\n\t\r\n\t})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(26)(module)))\n\n/***/ },\n/* 26 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 27 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6h2v-6h-2zm4 0v6h2v-6h-2z\\\" transform=\\\"translate(1 1)\\\" />\\n</svg>\"\n\n/***/ },\n/* 28 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6h2v-6h-2zm2 3l5 3v-6l-5 3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n/***/ },\n/* 29 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M4 0l-4 3 4 3v-6zm0 3l4 3v-6l-4 3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n/***/ },\n/* 30 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l4-3-4-3zm4 3v3l4-3-4-3v3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n/***/ },\n/* 31 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l5-3-5-3zm5 3v3h2v-6h-2v3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n/***/ }\n/******/ ]);\n\n\n/** WEBPACK FOOTER **\n ** index.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d655be3b4135aaf34361\n **/","(function () {\n\t'use strict';\n\n\t//dependencies\n\tvar Dolly = require('dolly');\n\tvar xhr = require('d3-xhr').xhr;\n\tvar binarySearch = require('binary-search');\n\tvar format = require('simple-number-formatter');\n\n\tvar PERIOD = 1;//1000 * 60 * 60 * 24 * 7;\n\tvar dpr = window.devicePixelRatio || 1;\n\n\t//state\n\tvar dolly = new Dolly();\n\tvar lastTime = 0;\n\tvar data;\n\tvar noteData = [];\n\tvar previous = {\n\t\tx: -1,\n\t\ty: -1,\n\t\tz: -1\n\t};\n\tvar playRate = 1;\n\tvar lastResize = -1;\n\tvar resizeTimeout;\n\tvar playing = false;\n\tvar camera;\n\tvar player;\n\tvar timeline;\n\tvar activeButtons = {\n\t\tleftKey: false,\n\t\trightKey: false\n\t};\n\n\tvar max = {}, min = {};\n\n\tvar ctx = document.getElementById('canvas').getContext('2d');\n\tvar period = document.getElementById('period');\n\tvar value = document.getElementById('value');\n\tvar notes = document.getElementById('notes');\n\tvar infobutton = document.getElementById('infobutton');\n\tvar info = document.getElementById('info');\n\tvar controls = document.getElementById('controls');\n\n\t//config\n\tvar field = 'immigrants';\n\tvar dataFile = 'data/immigration.tsv';\n\tvar colors = {\n\t\tbg: '#333333',\n\t\tline: 'rgb(63, 113, 190)',\n\t\tfill: 'rgba(63, 113, 190, 0.3)',\n\t\tgrid: '#666',\n\t\ttext: '#ffffff',\n\t\tplayer: '#ff0000',\n\t\tnote: '#dddddd'\n\t};\n\tvar dim = {\n\t\tspeed: 50, //periods per second, left or right\n\t\tchartLine: 1,\n\t\ticonSize: 20,\n\t\tscale: 1 * dpr, //canvas pixels per \"world\" unit\n\t\tplayer: 3,\n\t\tvPadding: 10,\n\t\tgridLine: 1,\n\t\tnoteLine: 2,\n\t\tgridSpacing: 20, //distance between x axis grid lines\n\t\tx: 8, //distance per period on x axis\n\t\ty: 1 / 4000, //distance per $ on y axis\n\t\tz: 5 //default zoom level\n\t};\n\n\tfunction resize() {\n\t\tvar width,\n\t\t\theight,\n\t\t\tmarginX,\n\t\t\tmarginY;\n\n\t\t//throttle to one resize every 100ms\n\t\tclearTimeout(resizeTimeout);\n\t\tif (Date.now() - lastResize < 100) {\n\t\t\tresizeTimeout = setTimeout(resize);\n\t\t\treturn;\n\t\t}\n\n\t\twidth = window.innerWidth;\n\t\theight = window.innerHeight;\n\n\t\theight -= controls.offsetHeight;\n\n\t\tctx.canvas.width = width;\n\t\tctx.canvas.height = height;\n\n\t\t/*\n\t\tset min/max of camera based on zoom\n\t\t*/\n\t\tmarginX = width / (dim.z * dim.scale) / 2;\n\t\tmarginY = height / (dim.z * dim.scale) / 2;\n\t\tcamera.minBounds.x = marginX;\n\t\tcamera.minBounds.y = marginY;\n\t\tcamera.maxBounds.x = max.x - marginX;\n\t\tcamera.maxBounds.y = (max[field] - min[field]) * dim.y - marginY + dim.vPadding * 2;\n\n\n\t\tdraw();\n\t\tlastResize = Date.now();\n\t}\n\n\tfunction comparePoints(a, b) {\n\t\treturn a.date - b.date;\n\t}\n\n\t/*\n\tConverts from date/value to x/y in \"world\" space\n\t*/\n\tfunction pointToX(point) {\n\t\t//convert date to period # before scaling\n\t\tvar period = (point.date - min.date) / PERIOD;\n\t\treturn period * dim.x;\n\t}\n\n\tfunction pointToY(point) {\n\t\treturn (point[field] - min[field]) * dim.y + dim.vPadding;\n\t}\n\n\t/*\n\tGiven date, find the nearest data point\n\t*/\n\tfunction findPoint(list, date) {\n\t\tvar index = binarySearch(list, {\n\t\t\tdate: date\n\t\t}, comparePoints);//, lo, hi);\n\n\t\t/*\n\t\tNegative result is bitwise complement of the index of the first element\n\t\tthat is larger than value */\n\t\tif (index < 0) {\n\t\t\treturn (~index) - 1; //jshint ignore: line\n\t\t}\n\n\t\treturn index;\n\t}\n\n\tfunction nearestPoint(x) {\n\t\tvar date = Math.floor(x / dim.x * PERIOD) + min.date;\n\t\treturn findPoint(data, date);\n\t}\n\n\tfunction interpolate(x, point, next) {\n\t\tvar lowX = pointToX(point),\n\t\t\thighX,\n\t\t\ty = pointToY(point),\n\t\t\tpartial;\n\n\t\t//interpolate\n\t\tif (x > lowX && next) {\n\t\t\thighX = pointToX(next);\n\t\t\tpartial = (x - lowX) / (highX - lowX);\n\t\t\ty = (1 - partial) * y + partial * pointToY(next);\n\t\t}\n\n\t\treturn y;\n\t}\n\n\tfunction draw() {\n\t\tvar width = ctx.canvas.width,\n\t\t\theight = ctx.canvas.height;\n\n\t\t//calculate \"camera\" values\n\t\tvar scale = camera.position.z * dim.scale;\n\t\tvar worldWidth = width * scale / camera.position.z;\n\t\tvar worldHeight = height * scale / camera.position.z;\n\t\tvar minWorldX = camera.position.x - worldWidth / 2;\n\t\tvar maxWorldX = minWorldX + worldWidth;\n\t\tvar minWorldY = camera.position.y - worldHeight / 2;\n\t\tvar maxWorldY = minWorldY + worldHeight;\n\n\t\tvar i;\n\t\tvar lo, hi;\n\t\tvar x, y;\n\t\tvar point;\n\n\t\t/*\n\t\tConvert from \"world\" space to canvas space\n\t\t*/\n\t\tfunction canvasX(x) {\n\t\t\t//todo: add margin\n\t\t\treturn (x - camera.position.x) * scale + width / 2;\n\t\t}\n\n\t\tfunction canvasY(y) {\n\t\t\t//todo: add margin\n\t\t\treturn height - ((y - camera.position.y) * scale + height / 2);\n\t\t}\n\n\t\t//clear\n\t\tctx.fillStyle = colors.bg;\n\t\tctx.fillRect(0, 0, width, height);\n\n\t\tlo = nearestPoint(Math.max(0, minWorldX));\n\t\thi = nearestPoint(maxWorldX) + 1;\n\n\t\t//todo: draw x/y axes\n\n\t\t//draw grid lines\n\t\t//todo: align with years\n\t\tctx.strokeStyle = colors.grid;\n\t\tctx.lineWidth = dim.gridLine;\n\t\tctx.beginPath();\n\n\t\t//horizontal grid lines\n\t\ti = Math.ceil(pointToX(data[lo]) / dim.gridSpacing) * dim.gridSpacing;\n\t\twhile (i < maxWorldX) {\n\t\t\tx = canvasX(i);\n\t\t\tctx.moveTo(x, 0);\n\t\t\tctx.lineTo(x, height);\n\t\t\ti += dim.gridSpacing;\n\t\t}\n\n\t\t//vertical grid lines\n\t\ti = Math.ceil(minWorldY / dim.gridSpacing) * dim.gridSpacing;\n\t\twhile (i < maxWorldY) {\n\t\t\ty = canvasY(i);\n\t\t\tctx.moveTo(0, y);\n\t\t\tctx.lineTo(width, y);\n\t\t\ti += dim.gridSpacing;\n\t\t}\n\t\tctx.stroke();\n\n\t\t//note markers\n\t\tctx.strokeStyle = colors.note;\n\t\tctx.lineWidth = dim.noteLine;\n\t\tctx.beginPath();\n\t\tnoteData.forEach(function (note) {\n\t\t\tvar i = findPoint(data, note.date),\n\t\t\t\tpoint = data[i],\n\t\t\t\tnext,\n\t\t\t\tx = pointToX(point),\n\t\t\t\ty = interpolate(x, point, data[i + 1]);\n\n\t\t\tx = canvasX(x);\n\t\t\ty = canvasY(y);\n\t\t\tctx.moveTo(x, y);\n\t\t\tctx.lineTo(x, height);\n\t\t});\n\t\tctx.stroke();\n\n\t\t//draw line\n\t\tctx.strokeStyle = colors.line;\n\t\tctx.lineWidth = dim.chartLine;\n\t\tctx.beginPath();\n\t\tfor (i = lo; i < hi; i++) {\n\t\t\tpoint = data[i];\n\t\t\tx = canvasX(pointToX(point));\n\t\t\ty = canvasY(pointToY(point));\n\n\t\t\tif (i) {\n\t\t\t\tctx.lineTo(x, y);\n\t\t\t} else {\n\t\t\t\tctx.moveTo(x, y);\n\t\t\t}\n\t\t}\n\t\tctx.stroke();\n\n\t\t//fill under graph\n\t\tctx.fillStyle = colors.fill;\n\t\tctx.lineTo(x, height * dim.scale);\n\t\tctx.lineTo(0, height * dim.scale);\n\t\tctx.fill();\n\n\t\t//draw player\n\t\tctx.fillStyle = colors.player;\n\t\tctx.beginPath();\n\t\tctx.arc(canvasX(player.position.x), canvasY(player.position.y), dim.player * dim.scale, 0, Math.PI * 2);\n\t\tctx.fill();\n\n\t\tctx.restore();\n\t}\n\n\tfunction animate() {\n\t\tvar now = Date.now(),\n\t\t\tdelta = Math.min(500, (Date.now() - lastTime) / 1000),\n\t\t\tmoving;\n\n\t\tfunction updatePlayer() {\n\t\t\tvar i,\n\t\t\t\tpoint,\n\t\t\t\tnext,\n\t\t\t\tdirection = 0,\n\t\t\t\tx,\n\t\t\t\tx1, x2,\n\t\t\t\ty1, y2,\n\t\t\t\tspeed;\n\n\t\t\tx = player.position.x;\n\n\t\t\t//move left or right\n\t\t\tif (activeButtons.leftKey || activeButtons.skipBackward) {\n\t\t\t\tdirection -= 1;\n\t\t\t}\n\t\t\tif (activeButtons.rightKey || activeButtons.skipForward) {\n\t\t\t\tdirection += 1;\n\t\t\t}\n\t\t\tif (!direction && playing) {\n\t\t\t\tdirection = 1;\n\t\t\t}\n\n\t\t\ti = nearestPoint(x);\n\t\t\tpoint = data[i];\n\n\t\t\tif (direction) {\n\t\t\t\t/*\n\t\t\t\tAdjust speed for slope so the \"player\" moves at a constant rate\n\t\t\t\tregardless of whether it moves up or down.\n\t\t\t\t*/\n\t\t\t\tif (i) {\n\t\t\t\t\tnext = data[Math.max(0, Math.min(data.length - 1, i + direction))];\n\t\t\t\t} else {\n\t\t\t\t\tnext = data[1];\n\t\t\t\t}\n\t\t\t\tx1 = pointToX(point);\n\t\t\t\tx2 = pointToX(next);\n\t\t\t\ty1 = pointToY(point);\n\t\t\t\ty2 = pointToY(next);\n\t\t\t\tspeed = dim.x / Math.sqrt(Math.pow(x1 - x2, 2) + Math.pow(y1 - y2, 2));\n\n\t\t\t\tx += dim.speed * speed * delta * direction;\n\n\t\t\t\t//keep from going off the edge of the screen\n\t\t\t\tx = Math.min(max.x, Math.max(min.x, x));\n\n\t\t\t\tplayer.position.x = x;\n\t\t\t}\n\n\t\t\tplayer.position.y = interpolate(x, point, data[i + 1]);\n\n\t\t\t//display stats\n\t\t\tperiod.textContent = point.date;\n\t\t\tvalue.textContent = format(point[field], '0,0', { thousandsDelimeter: ',' });\n\n\t\t\treturn !!direction;\n\t\t}\n\n\t\tmoving = updatePlayer();\n\t\tdolly.update(delta);\n\n\t\tif (moving || dolly.active(0.001)) {\n\t\t\t// don't draw if no updates\n\t\t\tdraw();\n\t\t}\n\n\t\tlastTime = now;\n\n\t\trequestAnimationFrame(animate);\n\t}\n\n\tfunction loadNotes() {\n\t\txhr('data/notes.tsv', function(response) {\n\t\t\tvar tsv = response.responseText.trim().split('\\n');\n\t\t\tvar fields = tsv.shift().split('\\t');\n\t\t\tvar activeAttractors = {};\n\n\t\t\tfunction updateAttractor(prop, att) {\n\t\t\t\tvar k;\n\t\t\t\tvar attraction = 0;\n\t\t\t\tvar att;\n\n\t\t\t\tactiveAttractors[prop.id] = att || 0;\n\n\t\t\t\tfor (k in activeAttractors) {\n\t\t\t\t\tif (activeAttractors.hasOwnProperty(k)) {\n\t\t\t\t\t\tatt = activeAttractors[k];\n\t\t\t\t\t\tattraction = Math.max(attraction, att);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//slight slowdown in playback rate when close to points of interest\n\t\t\t\tplayRate = 1 - attraction * 0.5;\n\t\t\t}\n\n\t\t\tnoteData = tsv.map(function (line, i) {\n\t\t\t\treturn line.split('\\t')\n\t\t\t\t\t.reduce(function (prev, str, i) {\n\t\t\t\t\t\tvar field = fields[i];\n\t\t\t\t\t\tvar val = parseFloat(str);\n\t\t\t\t\t\tvar date = Date.parse(str);\n\t\t\t\t\t\tif (isNaN(val)) {\n\t\t\t\t\t\t\tif (date > 0) {\n\t\t\t\t\t\t\t\tval = date;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tval = str;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tprev[field] = val;\n\t\t\t\t\t\treturn prev;\n\t\t\t\t\t}, Object.create(null));\n\t\t\t});\n\t\t\tnoteData.forEach(function (note) {\n\t\t\t\tvar lo = findPoint(data, note.start);\n\t\t\t\tvar hi = Math.min(data.length, findPoint(data, note.end) + 1);\n\t\t\t\tvar minY = Infinity;\n\t\t\t\tvar maxY = -Infinity;\n\t\t\t\tvar minX = pointToX(data[lo]);\n\t\t\t\tvar maxX = pointToX(data[hi - 1]);\n\t\t\t\tvar i;\n\t\t\t\tvar y;\n\t\t\t\tvar point;\n\n\t\t\t\tfor (i = lo; i < hi; i++) {\n\t\t\t\t\tpoint = data[i];\n\t\t\t\t\ty = pointToY(point);\n\t\t\t\t\tminY = Math.min(minY, y);\n\t\t\t\t\tmaxY = Math.max(maxY, y);\n\t\t\t\t}\n\n\t\t\t\t//create attractor\n\t\t\t\tvar attractor = dolly.prop({\n\t\t\t\t\tname: note.date,\n\t\t\t\t\tposition: [(minX + maxX) / 2, 0, 0]\n\t\t\t\t});\n\n\t\t\t\tcamera.attract(timeline, attractor, {\n\t\t\t\t\toffset: [0, (minY + maxY) / 2, note.zoom],\n\t\t\t\t\tinnerRadius: (maxX - minX) / 2,\n\t\t\t\t\touterRadius: 1.2 * (maxX - minX) / 2\n\t\t\t\t});\n\n\t\t\t\tvar div = document.createElement('div');\n\t\t\t\tdiv.style.display = 'none';\n\t\t\t\tnotes.appendChild(div);\n\t\t\t\tnote.note\n\t\t\t\t\t.split('\\n')\n\t\t\t\t\t.forEach(function (paragraph) {\n\t\t\t\t\t\tvar p = document.createElement('p');\n\t\t\t\t\t\tp.textContent = paragraph;\n\t\t\t\t\t\tdiv.appendChild(p);\n\t\t\t\t\t});\n\n\t\t\t\ttimeline.on('enterattractor', function (prop, att) {\n\t\t\t\t\tif (prop === attractor) {\n\t\t\t\t\t\tdiv.style.display = '';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ttimeline.on('leaveattractor', function (prop, att) {\n\t\t\t\t\tif (prop === attractor) {\n\t\t\t\t\t\tdiv.style.display = 'none';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttimeline.on('enterattractor', updateAttractor);\n\t\t\ttimeline.on('moveattractor', updateAttractor);\n\t\t\ttimeline.on('leaveattractor', updateAttractor);\n\t\t});\n\t}\n\n\tfunction buildInterface() {\n\t\tvar buttons = {\n\t\t\t\t'pause': require('raw!open-iconic/svg/media-pause.svg'),\n\t\t\t\t'play': require('raw!open-iconic/svg/media-play.svg'),\n\t\t\t\t'stepBackward': require('raw!open-iconic/svg/media-step-backward.svg'),\n\t\t\t\t'skipBackward': require('raw!open-iconic/svg/media-skip-backward.svg'),\n\t\t\t\t'skipForward': require('raw!open-iconic/svg/media-skip-forward.svg'),\n\t\t\t\t'stepForward': require('raw!open-iconic/svg/media-step-forward.svg')\n\t\t\t};\n\n\t\t//interface functions\n\n\t\tfunction play() {\n\t\t\tplaying = true;\n\t\t\tbuttons.play.classList.add('hidden');\n\t\t\tbuttons.pause.classList.remove('hidden');\n\t\t}\n\n\t\tfunction pause() {\n\t\t\tplaying = false;\n\t\t\tbuttons.play.classList.remove('hidden');\n\t\t\tbuttons.pause.classList.add('hidden');\n\t\t}\n\n\t\tfunction keyDown(evt) {\n\t\t\tswitch (evt.keyCode) {\n\t\t\t\tcase 37: //left\n\t\t\t\tcase 65: //a\n\t\t\t\t\tactiveButtons.leftKey = true;\n\t\t\t\t\tpause();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39: //right\n\t\t\t\tcase 68: //d\n\t\t\t\t\tactiveButtons.rightKey = true;\n\t\t\t\t\tpause();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfunction keyUp(evt) {\n\t\t\tswitch (evt.keyCode) {\n\t\t\t\tcase 37: //left\n\t\t\t\tcase 65: //a\n\t\t\t\t\tactiveButtons.leftKey = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39: //right\n\t\t\t\tcase 68: //d\n\t\t\t\t\tactiveButtons.rightKey = false;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 32: //space\n\t\t\t\t\tif (playing) {\n\t\t\t\t\t\tpause();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tplay();\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfunction buttonDown(button, name, evt) {\n\t\t\tpause();\n\t\t\tbutton.classList.add('active');\n\t\t\tactiveButtons[name] = true;\n\t\t}\n\n\t\tfunction buttonUp(button, name) {\n\t\t\tbutton.classList.remove('active');\n\t\t\tactiveButtons[name] = false;\n\t\t}\n\n\t\tfunction stepBack() {\n\t\t\tvar date = Math.floor(player.position.x / dim.x * PERIOD) + min.date,\n\t\t\t\ti = findPoint(noteData, date),\n\t\t\t\tx;\n\n\t\t\tif (i < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tx = pointToX(noteData[i]);\n\t\t\tif (i && player.position.x - x < 0.1) {\n\t\t\t\ti--;\n\t\t\t\tx = pointToX(noteData[i]);\n\t\t\t}\n\t\t\tplayer.position.x = x;\n\t\t}\n\n\t\tfunction stepNext() {\n\t\t\tvar date = Math.floor(player.position.x / dim.x * PERIOD) + min.date,\n\t\t\t\ti = findPoint(noteData, date) + 1;\n\n\t\t\tif (i < noteData.length) {\n\t\t\t\tplayer.position.x = pointToX(noteData[i]);\n\t\t\t}\n\t\t}\n\n\t\t//buttons\n\t\tObject.keys(buttons).forEach(function (key) {\n\t\t\tvar span = document.createElement('span'),\n\t\t\t\tsvg;\n\n\t\t\tspan.innerHTML = buttons[key];\n\t\t\tspan.id = key;\n\t\t\tsvg = span.firstChild;\n\t\t\tsvg.setAttribute('width', dim.iconSize);\n\t\t\tsvg.setAttribute('height', dim.iconSize);\n\n\t\t\tspan.addEventListener('mousedown', buttonDown.bind(null, span, key), false);\n\t\t\tspan.addEventListener('mouseup', buttonUp.bind(null, span, key), false);\n\t\t\tspan.addEventListener('mouseup', buttonUp.bind(null, span, key), false);\n\n\t\t\tcontrols.appendChild(span);\n\t\t\tbuttons[key] = span;\n\t\t});\n\n\t\tbuttons.pause.className = 'hidden';\n\t\tbuttons.stepBackward.addEventListener('click', stepBack, false);\n\t\tbuttons.stepForward.addEventListener('click', stepNext, false);\n\t\tbuttons.play.addEventListener('click', play, false);\n\t\tbuttons.pause.addEventListener('click', pause, false);\n\n\t\tinfobutton.addEventListener('click', function () {\n\t\t\tif (info.className) {\n\t\t\t\tinfo.className = '';\n\t\t\t} else {\n\t\t\t\tinfo.className = 'open';\n\t\t\t}\n\t\t});\n\n\t\t//keyboard\n\t\tdocument.addEventListener('keydown', keyDown, false);\n\t\tdocument.addEventListener('keyup', keyUp, false);\n\t}\n\n\txhr(dataFile, function(response) {\n\t\tvar tsv = response.responseText.split('\\n');\n\t\tvar fields = tsv.shift().split('\\t');\n\n\t\tfields.forEach(function (field) {\n\t\t\tmin[field] = Infinity;\n\t\t\tmax[field] = -Infinity;\n\t\t});\n\n\t\tdata = tsv.map(function (line, i) {\n\t\t\treturn line.split('\\t')\n\t\t\t\t.reduce(function (prev, str, i) {\n\t\t\t\t\tvar field = fields[i];\n\t\t\t\t\tvar val = parseFloat(str);\n\t\t\t\t\tvar date = Date.parse(str);\n\t\t\t\t\tif (isNaN(val) && date > 0) {\n\t\t\t\t\t\tval = date;\n\t\t\t\t\t}\n\n\t\t\t\t\tmax[field] = Math.max(max[field], val);\n\t\t\t\t\tmin[field] = Math.min(min[field], val);\n\n\t\t\t\t\tprev[field] = val;\n\t\t\t\t\treturn prev;\n\t\t\t\t}, Object.create(null));\n\t\t\t})\n\t\t\t.sort(comparePoints);\n\n\t\tvar first = data[0];\n\t\tvar last = data[data.length - 1];\n\t\tmin.x = pointToX(first);\n\t\tmax.x = pointToX(last);\n\n\t\t/*\n\t\tNow that data has been processed, set up the rest of the scene\n\t\t*/\n\t\tplayer = dolly.prop({\n\t\t\tname: 'player',\n\t\t\t// position: [max.x, pointToY(last), 0]\n\t\t\tposition: [min.x, pointToY(first), 0]\n\t\t});\n\n\t\tcamera = dolly.prop({\n\t\t\tname: 'camera',\n\t\t\tposition: [player.position.x, player.position.y, dim.z],\n\t\t\tlag: 0.85\n\t\t});\n\n\t\t/*\n\t\tA separate prop for timeline that follows the player along the x\n\t\taxis, so the attractor is not affected by distance along the y axis\n\t\t*/\n\t\ttimeline = dolly.prop({\n\t\t\tname: 'timeline',\n\t\t\tposition: [player.position.x, 0, 0],\n\t\t\tminBounds: [0, 0, 0],\n\t\t\tmaxBounds: [Infinity, 0, 0]\n\t\t});\n\n\t\tcamera.follow(player, {\n\t\t\toffset: [0, 0, dim.z],\n\t\t\tradius: 6\n\t\t});\n\n\t\ttimeline.follow(player, {\n\t\t\tlag: 0\n\t\t});\n\n\t\tloadNotes();\n\t\tbuildInterface();\n\n\t\tresize();\n\t\tanimate();\n\t});\n\n\twindow.addEventListener('resize', resize, false);\n}());\n\n\n/** WEBPACK FOOTER **\n ** ./~/jshint-loader!./src/index.js\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l6-3-6-3z\\\" transform=\\\"translate(1 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-play.svg\n ** module id = 1\n ** module chunks = 0\n **/","'use strict';\n\n//dependencies\nvar Vector = require('./vector');\nvar assign = require('object-assign'); //todo: use babel\nvar eventEmitter = require('event-emitter');\n\nvar propId = 0;\n\n//scratch vectors so we don't have to re-allocate all the time (too slow)\nvar scratch = new Vector();\nvar totalWeight = new Vector();\n\nfunction makeVector(arg) {\n\tfunction V() {\n\t\treturn Vector.apply(this, arg);\n\t}\n\n\tif (typeof arg === 'number') {\n\t\treturn new Vector(arg, arg, arg);\n\t}\n\n\tif (Array.isArray(arg)) {\n\t\tV.prototype = Vector.prototype;\n\t\treturn new V();\n\t}\n\n\tif (arg instanceof Vector) {\n\t\treturn Vector.clone(arg);\n\t}\n\n\tif (arg && typeof arg === 'object') {\n\t\treturn new Vector(arg.x || 0, arg.y || 0, arg.z || 0);\n\t}\n\n\treturn new Vector();\n}\n\nfunction safeDivide(a, b) {\n\tvar va = a.vec,\n\t\tvb = b.vec,\n\t\ti,\n\t\tdenom;\n\tfor (i = 0; i <3; i++) {\n\t\tdenom = vb[i];\n\t\tif (denom) {\n\t\t\tva[i] = va[i] / denom;\n\t\t}\n\t}\n}\n\nfunction Prop(opts) {\n\tvar options = opts || {};\n\n\tthis.lastUpdate = -1;\n\tthis.id = propId++;\n\n\tthis.name = options.name || 'prop' + this.id;\n\n\tthis.position = makeVector(options.position);\n\tthis.minBounds = makeVector(options.minBounds === undefined ? -Infinity : options.minBounds);\n\tthis.maxBounds = makeVector(options.maxBounds === undefined ? Infinity : options.maxBounds);\n\tthis.lag = typeof options.lag === 'number' && !isNaN(options.lag) ? options.lag : 0;\n\tthis.maxSpeed = typeof options.maxSpeed === 'number' && !isNaN(options.maxSpeed) ? options.maxSpeed : Infinity;\n\n\tthis.goal = new Vector();\n\tthis.attractorGoal = new Vector();\n\tthis.velocity = new Vector();\n\tthis.lastPosition = Vector.clone(this.position);\n\tthis.targets = [];\n\tthis.attractors = [];\n\n\teventEmitter(this);\n}\n\nProp.prototype.follow = function (prop, options) {\n\tvar target;\n\tvar self = this;\n\tvar weight;\n\n\tif (Array.isArray(prop)) {\n\t\tprop.forEach(function (p) {\n\t\t\tself.follow(p, options);\n\t\t});\n\t\treturn;\n\t}\n\n\tif (!(prop instanceof Prop)) {\n\t\tthrow new Error('Attempt to follow object that is not a Prop');\n\t}\n\n\tweight = options && options.weight;\n\tif (weight === undefined || isNaN(weight) && typeof weight === 'number') {\n\t\tweight = 1;\n\t}\n\n\ttarget = assign(\n\t\t{\n\t\t\tprop: prop,\n\t\t\tradius: 0,\n\t\t\tminDistance: 0,\n\t\t\tmaxDistance: Infinity,\n\t\t\tweight: 1\n\t\t},\n\t\toptions,\n\t\t{\n\t\t\tweight: makeVector(weight),\n\t\t\toffset: makeVector(options && options.offset),\n\t\t\toffsetPosition: new Vector()\n\t\t}\n\t);\n\n\tthis.targets.push(target);\n\n\treturn this;\n};\n\nProp.prototype.attract = function (prop, subject, options) {\n\tvar attractor;\n\tvar self = this;\n\n\tif (Array.isArray(prop)) {\n\t\tprop.forEach(function (p) {\n\t\t\tself.attract(p, options);\n\t\t});\n\t\treturn;\n\t}\n\n\tif (!(prop instanceof Prop) || !(subject instanceof Prop)) {\n\t\tthrow new Error('Attempt to follow object that is not a Prop');\n\t}\n\n\tattractor = assign(\n\t\t{\n\t\t\tprop: prop, //the object that moves\n\t\t\tsubject: subject, //the point of interest\n\t\t\tinnerRadius: 0,\n\t\t\touterRadius: 0,\n\t\t\tweight: 1\n\t\t},\n\t\toptions,\n\t\t{\n\t\t\toffset: makeVector(options && options.offset),\n\t\t\toffsetPosition: new Vector(),\n\t\t\tattraction: 0\n\t\t}\n\t);\n\n\tthis.attractors.push(attractor);\n\n\treturn this;\n};\n\nProp.prototype.update = function (delta, tick) {\n\tvar totalAttractionWeight = 0;\n\tvar totalAttraction = 0;\n\n\t//prevent infinite loops if follower graph is cyclical\n\tif (this.lastUpdate >= tick || tick === undefined) {\n\t\treturn;\n\t}\n\n\tthis.lastUpdate = tick;\n\n\tthis.lastPosition.copyVector(this.position);\n\n\tthis.emit('updatestart', this.position);\n\n\tif (!this.targets.length && !this.attractors.length) {\n\t\treturn;\n\t}\n\n\tthis.attractorGoal.zero();\n\tthis.attractors.forEach((attractor) => {\n\t\tvar distance;\n\t\tvar attraction = 0;\n\t\tvar lastAttraction = attractor.attraction;\n\n\t\tattractor.prop.update(delta, tick);\n\t\tattractor.subject.update(delta, tick);\n\n\t\tdistance = attractor.prop.position.distance(attractor.subject.position);\n\t\tif (distance < attractor.outerRadius) {\n\t\t\tattraction = Math.min(1, (attractor.outerRadius - distance) / (attractor.outerRadius - attractor.innerRadius));\n\t\t\ttotalAttraction = Math.max(totalAttraction, attraction * attractor.weight);\n\t\t\ttotalAttractionWeight += attractor.weight;\n\n\t\t\tattractor.offsetPosition.copyVector(attractor.subject.position).add(attractor.offset);\n\t\t\tthis.attractorGoal.scaleAndAdd(attractor.offsetPosition, attractor.weight);\n\n\t\t\tattractor.attraction = attraction;\n\t\t\tif (!lastAttraction) {\n\t\t\t\tattractor.prop.emit('enterattractor', attractor.subject, attraction);\n\t\t\t} else if (lastAttraction !== attraction) {\n\t\t\t\tattractor.prop.emit('moveattractor', attractor.subject, attraction);\n\t\t\t}\n\t\t} else if (attractor.attraction) {\n\t\t\tattractor.attraction = attraction;\n\t\t\tattractor.prop.emit('leaveattractor', attractor.subject);\n\t\t}\n\t});\n\tif (totalAttractionWeight) {\n\t\tthis.attractorGoal.scale(1 / totalAttractionWeight);\n\t}\n\n\ttotalWeight.zero();\n\tthis.goal.zero();\n\tif (totalAttraction < 1) {\n\t\tthis.targets.forEach((target) => {\n\t\t\tvar distance;\n\n\t\t\ttarget.prop.update(delta, tick);\n\n\t\t\ttarget.offsetPosition.copyVector(target.prop.position).add(target.offset);\n\n\t\t\tscratch.copyVector(target.offsetPosition).subtract(this.position); //vector towards target\n\n\t\t\ttarget.offsetPosition.copyVector(this.position);\n\t\t\tdistance = scratch.length();\n\t\t\tif (distance > target.radius) {\n\t\t\t\tscratch.normalize().scale(distance - target.radius);\n\t\t\t\ttarget.offsetPosition.add(scratch);\n\t\t\t}\n\n\t\t\ttarget.offsetPosition.multiply(target.weight);\n\t\t\tthis.goal.add(target.offsetPosition);\n\t\t\ttotalWeight.add(target.weight);\n\t\t});\n\t\tif (totalWeight.length()) {\n\t\t\tsafeDivide(this.goal, totalWeight);\n\t\t}\n\t\tif (totalAttraction) {\n\t\t\tthis.goal.lerp(this.attractorGoal, totalAttraction);\n\t\t}\n\t} else {\n\t\tthis.goal.copyVector(this.attractorGoal);\n\t}\n\n\tthis.velocity.copyVector(this.goal).subtract(this.position);\n\tif (this.lag) {\n\t\tthis.velocity.scale(Math.pow(delta, this.lag));\n\t}\n\n\t//cap velocity to maxSpeed\n\tif (this.maxSpeed && this.maxSpeed < Infinity && this.maxSpeed < this.velocity.length()) {\n\t\tthis.velocity.normalize().scale(this.maxSpeed);\n\t}\n\n\tthis.emit('update', this.position, this.velocity);\n\n\tthis.position.add(this.velocity);\n\n\t//fit within bounds\n\tthis.position.min(this.maxBounds).max(this.minBounds);\n\n\tthis.emit('updated', this.position);\n\n\treturn this;\n};\n\nProp.prototype.active = function (epsilon) {\n\treturn this.position.distance(this.lastPosition) > (epsilon || 0.00001);\n};\n\nfunction Dolly() {\n\tvar tick = -1;\n\tvar props = [];\n\tvar updating = false;\n\tvar self = this;\n\n\tthis.update = function (delta) {\n\t\tif (updating) {\n\t\t\treturn;\n\t\t}\n\t\tupdating = true;\n\n\t\ttick++;\n\t\tprops.forEach(function (prop) {\n\t\t\tprop.update(delta, tick);\n\t\t});\n\n\t\tupdating = false;\n\n\t\treturn self;\n\t};\n\n\tthis.prop = function (options) {\n\t\tvar prop = new Prop(options);\n\t\tprops.push(prop);\n\t\treturn prop;\n\t};\n\n\tthis.active = function (epsilon) {\n\t\tvar i;\n\t\tfor (i = 0; i < props.length; i++) {\n\t\t\tif (props[i].active(epsilon)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t};\n}\n\nmodule.exports = Dolly;\n\n\n/** WEBPACK FOOTER **\n ** ./~/jshint-loader!../dolly/src/index.js\n **/","'use strict';\n\n//dependencies\nvar vec3 = require('gl-matrix-vec3');\n\nfunction Vector(x, y, z) {\n\tthis.vec = vec3.fromValues(x || 0, y || 0, z || 0);\n\n\tObject.defineProperties(this, {\n\t\tx: {\n\t\t\twriteable: true,\n\t\t\tenumerable: true,\n\t\t\tget: () => this.vec[0],\n\t\t\tset: (val) => this.vec[0] = val\n\t\t},\n\t\ty: {\n\t\t\twriteable: true,\n\t\t\tenumerable: true,\n\t\t\tget: () => this.vec[1],\n\t\t\tset: (val) => this.vec[1] = val\n\t\t},\n\t\tz: {\n\t\t\twriteable: true,\n\t\t\tenumerable: true,\n\t\t\tget: () => this.vec[2],\n\t\t\tset: (val) => this.vec[2] = val\n\t\t}\n\t});\n}\n\nVector.prototype.toString = function() {\n\treturn vec3.str(this.vec);\n};\n\nVector.prototype.clone = function (v) {\n\treturn new Vector(v.x, v.y, v.z);\n};\n\nVector.prototype.copy = function (v) {\n\tif (v instanceof Vector) {\n\t\tvec3.copy(this.vec, v.vec);\n\t} else if (typeof v === 'object' && v) {\n\t\tthis.set(v.x || 0, v.y || 0, v.z || 0);\n\t}\n\treturn this;\n};\n\nVector.prototype.copyVector = function (v) {\n\tvec3.copy(this.vec, v.vec);\n\treturn this;\n};\n\nVector.prototype.zero = function () {\n\tvec3.set(this.vec, 0, 0, 0);\n\treturn this;\n};\n\nVector.prototype.set = function (x, y, z) {\n\tvec3.set(this.vec, x, y, z);\n\treturn this;\n};\n\nVector.prototype.negate = function () {\n\tvec3.negate(this.vec, this.vec);\n\treturn this;\n};\n\nVector.prototype.normalize = function () {\n\tvec3.normalize(this.vec, this.vec);\n\treturn this;\n};\n\nVector.prototype.scale = function (scale) {\n\tvec3.scale(this.vec, this.vec, scale);\n\treturn this;\n};\n\nVector.prototype.scaleAndAdd = function (v, scale) {\n\tvec3.scaleAndAdd(this.vec, this.vec, v.vec, scale);\n\treturn this;\n};\n\nVector.prototype.lerp = function (v, t) {\n\tvec3.lerp(this.vec, this.vec, v.vec, t);\n\treturn this;\n};\n\n//wrap functions that operate on `this` and another vector\n[\n\t'add',\n\t'cross',\n\t'divide',\n\t'max',\n\t'min',\n\t'multiply',\n\t'subtract'\n].forEach(function (key) {\n\tvar fn = vec3[key];\n\tVector.prototype[key] = function (v) {\n\t\tfn(this.vec, this.vec, v.vec);\n\t\treturn this;\n\t};\n});\n\nVector.prototype.length = function () {\n\treturn vec3.length(this.vec);\n};\n\nVector.prototype.squaredLength = function () {\n\treturn vec3.squaredLength(this.vec);\n};\n\n//wrap functions that return a number based on this and another vector\n[\n\t'distance',\n\t'dot',\n\t'squaredDistance'\n].forEach(function (key) {\n\tvar fn = vec3[key];\n\tVector.prototype[key] = function (v) {\n\t\treturn fn(this.vec, v.vec);\n\t};\n});\n\nVector.fromArray = function (array) {\n\treturn new Vector.apply(null, array);\n};\n\nVector.clone = function (v) {\n\treturn new Vector(v.x, v.y, v.z);\n};\n\nmodule.exports = Vector;\n\n\n/** WEBPACK FOOTER **\n ** ../dolly/~/jshint-loader!../dolly/src/vector.js\n **/","/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation \n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE \nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\n/**\n * @class 3 Dimensional Vector\n * @name vec3\n */\nvar vec3 = {};\n\nvar GLMAT_ARRAY_TYPE = require('common').GLMAT_ARRAY_TYPE;\nvar GLMAT_RANDOM = require('common').GLMAT_RANDOM;\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nvec3.create = function() {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {vec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nvec3.clone = function(a) {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nvec3.fromValues = function(x, y, z) {\n    var out = new GLMAT_ARRAY_TYPE(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the source vector\n * @returns {vec3} out\n */\nvec3.copy = function(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n};\n\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nvec3.set = function(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n};\n\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.add = function(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n};\n\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.subtract = function(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nvec3.sub = vec3.subtract;\n\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.multiply = function(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nvec3.mul = vec3.multiply;\n\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.divide = function(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n};\n\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nvec3.div = vec3.divide;\n\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.min = function(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n};\n\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.max = function(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n};\n\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nvec3.scale = function(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n};\n\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nvec3.scaleAndAdd = function(out, a, b, scale) {\n    out[0] = a[0] + (b[0] * scale);\n    out[1] = a[1] + (b[1] * scale);\n    out[2] = a[2] + (b[2] * scale);\n    return out;\n};\n\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} distance between a and b\n */\nvec3.distance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nvec3.dist = vec3.distance;\n\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nvec3.squaredDistance = function(a, b) {\n    var x = b[0] - a[0],\n        y = b[1] - a[1],\n        z = b[2] - a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nvec3.sqrDist = vec3.squaredDistance;\n\n/**\n * Calculates the length of a vec3\n *\n * @param {vec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nvec3.length = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return Math.sqrt(x*x + y*y + z*z);\n};\n\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nvec3.len = vec3.length;\n\n/**\n * Calculates the squared length of a vec3\n *\n * @param {vec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nvec3.squaredLength = function (a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    return x*x + y*y + z*z;\n};\n\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nvec3.sqrLen = vec3.squaredLength;\n\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to negate\n * @returns {vec3} out\n */\nvec3.negate = function(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n};\n\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a vector to normalize\n * @returns {vec3} out\n */\nvec3.normalize = function(out, a) {\n    var x = a[0],\n        y = a[1],\n        z = a[2];\n    var len = x*x + y*y + z*z;\n    if (len > 0) {\n        //TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n        out[0] = a[0] * len;\n        out[1] = a[1] * len;\n        out[2] = a[2] * len;\n    }\n    return out;\n};\n\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nvec3.dot = function (a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n};\n\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @returns {vec3} out\n */\nvec3.cross = function(out, a, b) {\n    var ax = a[0], ay = a[1], az = a[2],\n        bx = b[0], by = b[1], bz = b[2];\n\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n};\n\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the first operand\n * @param {vec3} b the second operand\n * @param {Number} t interpolation amount between the two inputs\n * @returns {vec3} out\n */\nvec3.lerp = function (out, a, b, t) {\n    var ax = a[0],\n        ay = a[1],\n        az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n};\n\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\nvec3.random = function (out, scale) {\n    scale = scale || 1.0;\n\n    var r = GLMAT_RANDOM() * 2.0 * Math.PI;\n    var z = (GLMAT_RANDOM() * 2.0) - 1.0;\n    var zScale = Math.sqrt(1.0-z*z) * scale;\n\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat4 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12];\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13];\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {mat4} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nvec3.transformMat3 = function(out, a, m) {\n    var x = a[0], y = a[1], z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n};\n\n/**\n * Transforms the vec3 with a quat\n *\n * @param {vec3} out the receiving vector\n * @param {vec3} a the vector to transform\n * @param {quat} q quaternion to transform with\n * @returns {vec3} out\n */\nvec3.transformQuat = function(out, a, q) {\n    // benchmarks: http://jsperf.com/quaternion-transform-vec3-implementations\n\n    var x = a[0], y = a[1], z = a[2],\n        qx = q[0], qy = q[1], qz = q[2], qw = q[3],\n\n        // calculate quat * vec\n        ix = qw * x + qy * z - qz * y,\n        iy = qw * y + qz * x - qx * z,\n        iz = qw * z + qx * y - qy * x,\n        iw = -qx * x - qy * y - qz * z;\n\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    return out;\n};\n\n/*\n* Rotate a 3D vector around the x-axis\n* @param {vec3} out The receiving vec3\n* @param {vec3} a The vec3 point to rotate\n* @param {vec3} b The origin of the rotation\n* @param {Number} c The angle of rotation\n* @returns {vec3} out\n*/\nvec3.rotateX = function(out, a, b, c){\n   var p = [], r=[];\n\t  //Translate point to the origin\n\t  p[0] = a[0] - b[0];\n\t  p[1] = a[1] - b[1];\n  \tp[2] = a[2] - b[2];\n\n\t  //perform rotation\n\t  r[0] = p[0];\n\t  r[1] = p[1]*Math.cos(c) - p[2]*Math.sin(c);\n\t  r[2] = p[1]*Math.sin(c) + p[2]*Math.cos(c);\n\n\t  //translate to correct position\n\t  out[0] = r[0] + b[0];\n\t  out[1] = r[1] + b[1];\n\t  out[2] = r[2] + b[2];\n\n  \treturn out;\n};\n\n/*\n* Rotate a 3D vector around the y-axis\n* @param {vec3} out The receiving vec3\n* @param {vec3} a The vec3 point to rotate\n* @param {vec3} b The origin of the rotation\n* @param {Number} c The angle of rotation\n* @returns {vec3} out\n*/\nvec3.rotateY = function(out, a, b, c){\n  \tvar p = [], r=[];\n  \t//Translate point to the origin\n  \tp[0] = a[0] - b[0];\n  \tp[1] = a[1] - b[1];\n  \tp[2] = a[2] - b[2];\n  \n  \t//perform rotation\n  \tr[0] = p[2]*Math.sin(c) + p[0]*Math.cos(c);\n  \tr[1] = p[1];\n  \tr[2] = p[2]*Math.cos(c) - p[0]*Math.sin(c);\n  \n  \t//translate to correct position\n  \tout[0] = r[0] + b[0];\n  \tout[1] = r[1] + b[1];\n  \tout[2] = r[2] + b[2];\n  \n  \treturn out;\n};\n\n/*\n* Rotate a 3D vector around the z-axis\n* @param {vec3} out The receiving vec3\n* @param {vec3} a The vec3 point to rotate\n* @param {vec3} b The origin of the rotation\n* @param {Number} c The angle of rotation\n* @returns {vec3} out\n*/\nvec3.rotateZ = function(out, a, b, c){\n  \tvar p = [], r=[];\n  \t//Translate point to the origin\n  \tp[0] = a[0] - b[0];\n  \tp[1] = a[1] - b[1];\n  \tp[2] = a[2] - b[2];\n  \n  \t//perform rotation\n  \tr[0] = p[0]*Math.cos(c) - p[1]*Math.sin(c);\n  \tr[1] = p[0]*Math.sin(c) + p[1]*Math.cos(c);\n  \tr[2] = p[2];\n  \n  \t//translate to correct position\n  \tout[0] = r[0] + b[0];\n  \tout[1] = r[1] + b[1];\n  \tout[2] = r[2] + b[2];\n  \n  \treturn out;\n};\n\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nvec3.forEach = (function() {\n    var vec = vec3.create();\n\n    return function(a, stride, offset, count, fn, arg) {\n        var i, l;\n        if(!stride) {\n            stride = 3;\n        }\n\n        if(!offset) {\n            offset = 0;\n        }\n        \n        if(count) {\n            l = Math.min((count * stride) + offset, a.length);\n        } else {\n            l = a.length;\n        }\n\n        for(i = offset; i < l; i += stride) {\n            vec[0] = a[i]; vec[1] = a[i+1]; vec[2] = a[i+2];\n            fn(vec, vec, arg);\n            a[i] = vec[0]; a[i+1] = vec[1]; a[i+2] = vec[2];\n        }\n        \n        return a;\n    };\n})();\n\n/**\n * Returns a string representation of a vector\n *\n * @param {vec3} vec vector to represent as a string\n * @returns {String} string representation of the vector\n */\nvec3.str = function (a) {\n    return 'vec3(' + a[0] + ', ' + a[1] + ', ' + a[2] + ')';\n};\n\nmodule.exports = vec3;\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/gl-matrix-vec3/index.js\n ** module id = 4\n ** module chunks = 0\n **/","/* Copyright (c) 2013, Brandon Jones, Colin MacKenzie IV. All rights reserved.\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\n  * Redistributions of source code must retain the above copyright notice, this\n    list of conditions and the following disclaimer.\n  * Redistributions in binary form must reproduce the above copyright notice,\n    this list of conditions and the following disclaimer in the documentation \n    and/or other materials provided with the distribution.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\nANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\nWARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE \nDISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR\nANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\nLOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON\nANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\nSOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */\n\nif(!GLMAT_EPSILON) {\n    var GLMAT_EPSILON = 0.000001;\n}\n\nif(!GLMAT_ARRAY_TYPE) {\n    var GLMAT_ARRAY_TYPE = (typeof Float32Array !== 'undefined') ? Float32Array : Array;\n}\n\nif(!GLMAT_RANDOM) {\n    var GLMAT_RANDOM = Math.random;\n}\n\n/**\n * @class Common utilities\n * @name glMatrix\n */\nvar glMatrix = {};\n\n/**\n * Sets the type of array used when creating new vectors and matricies\n *\n * @param {Type} type Array type, such as Float32Array or Array\n */\nglMatrix.setMatrixArrayType = function(type) {\n    GLMAT_ARRAY_TYPE = type;\n}\n\n\nvar degree = Math.PI / 180;\n\n/**\n* Convert Degree To Radian\n*\n* @param {Number} Angle in Degrees\n*/\nglMatrix.toRadian = function(a){\n     return a * degree;\n}\n\nmodule.exports = {\n  GLMAT_EPSILON : GLMAT_EPSILON,\n  GLMAT_ARRAY_TYPE : GLMAT_ARRAY_TYPE,\n  GLMAT_RANDOM : GLMAT_RANDOM,\n  glMatrix : glMatrix\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/gl-matrix-vec3/~/gl-matrix-common/index.js\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n\nfunction ToObject(val) {\n\tif (val == null) {\n\t\tthrow new TypeError('Object.assign cannot be called with null or undefined');\n\t}\n\n\treturn Object(val);\n}\n\nfunction ownEnumerableKeys(obj) {\n\tvar keys = Object.getOwnPropertyNames(obj);\n\n\tif (Object.getOwnPropertySymbols) {\n\t\tkeys = keys.concat(Object.getOwnPropertySymbols(obj));\n\t}\n\n\treturn keys.filter(function (key) {\n\t\treturn propIsEnumerable.call(obj, key);\n\t});\n}\n\nmodule.exports = Object.assign || function (target, source) {\n\tvar from;\n\tvar keys;\n\tvar to = ToObject(target);\n\n\tfor (var s = 1; s < arguments.length; s++) {\n\t\tfrom = arguments[s];\n\t\tkeys = ownEnumerableKeys(Object(from));\n\n\t\tfor (var i = 0; i < keys.length; i++) {\n\t\t\tto[keys[i]] = from[keys[i]];\n\t\t}\n\t}\n\n\treturn to;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/object-assign/index.js\n ** module id = 6\n ** module chunks = 0\n **/","'use strict';\n\nvar d        = require('d')\n  , callable = require('es5-ext/object/valid-callable')\n\n  , apply = Function.prototype.apply, call = Function.prototype.call\n  , create = Object.create, defineProperty = Object.defineProperty\n  , defineProperties = Object.defineProperties\n  , hasOwnProperty = Object.prototype.hasOwnProperty\n  , descriptor = { configurable: true, enumerable: false, writable: true }\n\n  , on, once, off, emit, methods, descriptors, base;\n\non = function (type, listener) {\n\tvar data;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) {\n\t\tdata = descriptor.value = create(null);\n\t\tdefineProperty(this, '__ee__', descriptor);\n\t\tdescriptor.value = null;\n\t} else {\n\t\tdata = this.__ee__;\n\t}\n\tif (!data[type]) data[type] = listener;\n\telse if (typeof data[type] === 'object') data[type].push(listener);\n\telse data[type] = [data[type], listener];\n\n\treturn this;\n};\n\nonce = function (type, listener) {\n\tvar once, self;\n\n\tcallable(listener);\n\tself = this;\n\ton.call(this, type, once = function () {\n\t\toff.call(self, type, once);\n\t\tapply.call(listener, this, arguments);\n\t});\n\n\tonce.__eeOnceListener__ = listener;\n\treturn this;\n};\n\noff = function (type, listener) {\n\tvar data, listeners, candidate, i;\n\n\tcallable(listener);\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return this;\n\tdata = this.__ee__;\n\tif (!data[type]) return this;\n\tlisteners = data[type];\n\n\tif (typeof listeners === 'object') {\n\t\tfor (i = 0; (candidate = listeners[i]); ++i) {\n\t\t\tif ((candidate === listener) ||\n\t\t\t\t\t(candidate.__eeOnceListener__ === listener)) {\n\t\t\t\tif (listeners.length === 2) data[type] = listeners[i ? 0 : 1];\n\t\t\t\telse listeners.splice(i, 1);\n\t\t\t}\n\t\t}\n\t} else {\n\t\tif ((listeners === listener) ||\n\t\t\t\t(listeners.__eeOnceListener__ === listener)) {\n\t\t\tdelete data[type];\n\t\t}\n\t}\n\n\treturn this;\n};\n\nemit = function (type) {\n\tvar i, l, listener, listeners, args;\n\n\tif (!hasOwnProperty.call(this, '__ee__')) return;\n\tlisteners = this.__ee__[type];\n\tif (!listeners) return;\n\n\tif (typeof listeners === 'object') {\n\t\tl = arguments.length;\n\t\targs = new Array(l - 1);\n\t\tfor (i = 1; i < l; ++i) args[i - 1] = arguments[i];\n\n\t\tlisteners = listeners.slice();\n\t\tfor (i = 0; (listener = listeners[i]); ++i) {\n\t\t\tapply.call(listener, this, args);\n\t\t}\n\t} else {\n\t\tswitch (arguments.length) {\n\t\tcase 1:\n\t\t\tcall.call(listeners, this);\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tcall.call(listeners, this, arguments[1]);\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tcall.call(listeners, this, arguments[1], arguments[2]);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tl = arguments.length;\n\t\t\targs = new Array(l - 1);\n\t\t\tfor (i = 1; i < l; ++i) {\n\t\t\t\targs[i - 1] = arguments[i];\n\t\t\t}\n\t\t\tapply.call(listeners, this, args);\n\t\t}\n\t}\n};\n\nmethods = {\n\ton: on,\n\tonce: once,\n\toff: off,\n\temit: emit\n};\n\ndescriptors = {\n\ton: d(on),\n\tonce: d(once),\n\toff: d(off),\n\temit: d(emit)\n};\n\nbase = defineProperties({}, descriptors);\n\nmodule.exports = exports = function (o) {\n\treturn (o == null) ? create(base) : defineProperties(Object(o), descriptors);\n};\nexports.methods = methods;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/index.js\n ** module id = 7\n ** module chunks = 0\n **/","'use strict';\n\nvar assign        = require('es5-ext/object/assign')\n  , normalizeOpts = require('es5-ext/object/normalize-options')\n  , isCallable    = require('es5-ext/object/is-callable')\n  , contains      = require('es5-ext/string/#/contains')\n\n  , d;\n\nd = module.exports = function (dscr, value/*, options*/) {\n\tvar c, e, w, options, desc;\n\tif ((arguments.length < 2) || (typeof dscr !== 'string')) {\n\t\toptions = value;\n\t\tvalue = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[2];\n\t}\n\tif (dscr == null) {\n\t\tc = w = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t\tw = contains.call(dscr, 'w');\n\t}\n\n\tdesc = { value: value, configurable: c, enumerable: e, writable: w };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\nd.gs = function (dscr, get, set/*, options*/) {\n\tvar c, e, options, desc;\n\tif (typeof dscr !== 'string') {\n\t\toptions = set;\n\t\tset = get;\n\t\tget = dscr;\n\t\tdscr = null;\n\t} else {\n\t\toptions = arguments[3];\n\t}\n\tif (get == null) {\n\t\tget = undefined;\n\t} else if (!isCallable(get)) {\n\t\toptions = get;\n\t\tget = set = undefined;\n\t} else if (set == null) {\n\t\tset = undefined;\n\t} else if (!isCallable(set)) {\n\t\toptions = set;\n\t\tset = undefined;\n\t}\n\tif (dscr == null) {\n\t\tc = true;\n\t\te = false;\n\t} else {\n\t\tc = contains.call(dscr, 'c');\n\t\te = contains.call(dscr, 'e');\n\t}\n\n\tdesc = { get: get, set: set, configurable: c, enumerable: e };\n\treturn !options ? desc : assign(normalizeOpts(options), desc);\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/d/index.js\n ** module id = 8\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.assign\n\t: require('./shim');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/assign/index.js\n ** module id = 9\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = function () {\n\tvar assign = Object.assign, obj;\n\tif (typeof assign !== 'function') return false;\n\tobj = { foo: 'raz' };\n\tassign(obj, { bar: 'dwa' }, { trzy: 'trzy' });\n\treturn (obj.foo + obj.bar + obj.trzy) === 'razdwatrzy';\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/assign/is-implemented.js\n ** module id = 10\n ** module chunks = 0\n **/","'use strict';\n\nvar keys  = require('../keys')\n  , value = require('../valid-value')\n\n  , max = Math.max;\n\nmodule.exports = function (dest, src/*, srcn*/) {\n\tvar error, i, l = max(arguments.length, 2), assign;\n\tdest = Object(value(dest));\n\tassign = function (key) {\n\t\ttry { dest[key] = src[key]; } catch (e) {\n\t\t\tif (!error) error = e;\n\t\t}\n\t};\n\tfor (i = 1; i < l; ++i) {\n\t\tsrc = arguments[i];\n\t\tkeys(src).forEach(assign);\n\t}\n\tif (error !== undefined) throw error;\n\treturn dest;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/assign/shim.js\n ** module id = 11\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? Object.keys\n\t: require('./shim');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/keys/index.js\n ** module id = 12\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = function () {\n\ttry {\n\t\tObject.keys('primitive');\n\t\treturn true;\n\t} catch (e) { return false; }\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/keys/is-implemented.js\n ** module id = 13\n ** module chunks = 0\n **/","'use strict';\n\nvar keys = Object.keys;\n\nmodule.exports = function (object) {\n\treturn keys(object == null ? object : Object(object));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/keys/shim.js\n ** module id = 14\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = function (value) {\n\tif (value == null) throw new TypeError(\"Cannot use null or undefined\");\n\treturn value;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/valid-value.js\n ** module id = 15\n ** module chunks = 0\n **/","'use strict';\n\nvar forEach = Array.prototype.forEach, create = Object.create;\n\nvar process = function (src, obj) {\n\tvar key;\n\tfor (key in src) obj[key] = src[key];\n};\n\nmodule.exports = function (options/*, options*/) {\n\tvar result = create(null);\n\tforEach.call(arguments, function (options) {\n\t\tif (options == null) return;\n\t\tprocess(Object(options), result);\n\t});\n\treturn result;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/normalize-options.js\n ** module id = 16\n ** module chunks = 0\n **/","// Deprecated\n\n'use strict';\n\nmodule.exports = function (obj) { return typeof obj === 'function'; };\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/is-callable.js\n ** module id = 17\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = require('./is-implemented')()\n\t? String.prototype.contains\n\t: require('./shim');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/string/#/contains/index.js\n ** module id = 18\n ** module chunks = 0\n **/","'use strict';\n\nvar str = 'razdwatrzy';\n\nmodule.exports = function () {\n\tif (typeof str.contains !== 'function') return false;\n\treturn ((str.contains('dwa') === true) && (str.contains('foo') === false));\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/string/#/contains/is-implemented.js\n ** module id = 19\n ** module chunks = 0\n **/","'use strict';\n\nvar indexOf = String.prototype.indexOf;\n\nmodule.exports = function (searchString/*, position*/) {\n\treturn indexOf.call(this, searchString, arguments[1]) > -1;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/string/#/contains/shim.js\n ** module id = 20\n ** module chunks = 0\n **/","'use strict';\n\nmodule.exports = function (fn) {\n\tif (typeof fn !== 'function') throw new TypeError(fn + \" is not a function\");\n\treturn fn;\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ../dolly/~/event-emitter/~/es5-ext/object/valid-callable.js\n ** module id = 21\n ** module chunks = 0\n **/","if (typeof Map === \"undefined\") {\n  Map = function() { this.clear(); };\n  Map.prototype = {\n    set: function(k, v) { this._[k] = v; return this; },\n    get: function(k) { return this._[k]; },\n    has: function(k) { return k in this._; },\n    delete: function(k) { return k in this._ && delete this._[k]; },\n    clear: function() { this._ = Object.create(null); },\n    get size() { var n = 0; for (var k in this._) ++n; return n; },\n    forEach: function(c) { for (var k in this._) c(this._[k], k, this); }\n  };\n}\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n  typeof define === 'function' && define.amd ? define(['exports'], factory) :\n  factory((global.xhr = {}));\n}(this, function (exports) { 'use strict';\n\n  var dsv = function(delimiter) {\n    var reFormat = new RegExp(\"[\\\"\" + delimiter + \"\\n]\"),\n        delimiterCode = delimiter.charCodeAt(0);\n\n    function parse(text, f) {\n      var o;\n      return parseRows(text, function(row, i) {\n        if (o) return o(row, i - 1);\n        var a = new Function(\"d\", \"return {\" + row.map(function(name, i) {\n          return JSON.stringify(name) + \": d[\" + i + \"]\";\n        }).join(\",\") + \"}\");\n        o = f ? function(row, i) { return f(a(row), i); } : a;\n      });\n    }\n\n    function parseRows(text, f) {\n      var EOL = {}, // sentinel value for end-of-line\n          EOF = {}, // sentinel value for end-of-file\n          rows = [], // output rows\n          N = text.length,\n          I = 0, // current character index\n          n = 0, // the current line number\n          t, // the current token\n          eol; // is the current token followed by EOL?\n\n      function token() {\n        if (I >= N) return EOF; // special case: end of file\n        if (eol) return eol = false, EOL; // special case: end of line\n\n        // special case: quotes\n        var j = I;\n        if (text.charCodeAt(j) === 34) {\n          var i = j;\n          while (i++ < N) {\n            if (text.charCodeAt(i) === 34) {\n              if (text.charCodeAt(i + 1) !== 34) break;\n              ++i;\n            }\n          }\n          I = i + 2;\n          var c = text.charCodeAt(i + 1);\n          if (c === 13) {\n            eol = true;\n            if (text.charCodeAt(i + 2) === 10) ++I;\n          } else if (c === 10) {\n            eol = true;\n          }\n          return text.slice(j + 1, i).replace(/\"\"/g, \"\\\"\");\n        }\n\n        // common case: find next delimiter or newline\n        while (I < N) {\n          var c = text.charCodeAt(I++), k = 1;\n          if (c === 10) eol = true; // \\n\n          else if (c === 13) { eol = true; if (text.charCodeAt(I) === 10) ++I, ++k; } // \\r|\\r\\n\n          else if (c !== delimiterCode) continue;\n          return text.slice(j, I - k);\n        }\n\n        // special case: last token before EOF\n        return text.slice(j);\n      }\n\n      while ((t = token()) !== EOF) {\n        var a = [];\n        while (t !== EOL && t !== EOF) {\n          a.push(t);\n          t = token();\n        }\n        if (f && (a = f(a, n++)) == null) continue;\n        rows.push(a);\n      }\n\n      return rows;\n    }\n\n    function format(rows) {\n      if (Array.isArray(rows[0])) return formatRows(rows); // deprecated; use formatRows\n      var fieldSet = Object.create(null), fields = [];\n\n      // Compute unique fields in order of discovery.\n      rows.forEach(function(row) {\n        for (var field in row) {\n          if (!((field += \"\") in fieldSet)) {\n            fields.push(fieldSet[field] = field);\n          }\n        }\n      });\n\n      return [fields.map(formatValue).join(delimiter)].concat(rows.map(function(row) {\n        return fields.map(function(field) {\n          return formatValue(row[field]);\n        }).join(delimiter);\n      })).join(\"\\n\");\n    }\n\n    function formatRows(rows) {\n      return rows.map(formatRow).join(\"\\n\");\n    }\n\n    function formatRow(row) {\n      return row.map(formatValue).join(delimiter);\n    }\n\n    function formatValue(text) {\n      return reFormat.test(text) ? \"\\\"\" + text.replace(/\\\"/g, \"\\\"\\\"\") + \"\\\"\" : text;\n    }\n\n    return {\n      parse: parse,\n      parseRows: parseRows,\n      format: format,\n      formatRows: formatRows\n    };\n  }\n\n  var tsv = dsv(\"\\t\");\n\n  function responseOf(dsv, row) {\n    return function(request) {\n      return dsv.parse(request.responseText, row);\n    };\n  }\n\n  function fixCallback(callback) {\n    return function(error, request) {\n      callback(error == null ? request : null);\n    };\n  }\n\n  function hasResponse(request) {\n    var type = request.responseType;\n    return type && type !== \"text\"\n        ? request.response // null on error\n        : request.responseText; // \"\" on error\n  }\n\n  function Dispatch(types) {\n    var i = -1,\n        n = types.length,\n        callbacksByType = {},\n        callbackByName = {},\n        type,\n        that = this;\n\n    that.on = function(type, callback) {\n      type = parseType(type);\n\n      // Return the current callback, if any.\n      if (arguments.length < 2) {\n        return (callback = callbackByName[type.name]) && callback.value;\n      }\n\n      // If a type was specified\n      if (type.type) {\n        var callbacks = callbacksByType[type.type],\n            callback0 = callbackByName[type.name],\n            i;\n\n        // Remove the current callback, if any, using copy-on-remove.\n        if (callback0) {\n          callback0.value = null;\n          i = callbacks.indexOf(callback0);\n          callbacksByType[type.type] = callbacks = callbacks.slice(0, i).concat(callbacks.slice(i + 1));\n          delete callbackByName[type.name];\n        }\n\n        // Add the new callback, if any.\n        if (callback) {\n          callback = {value: callback};\n          callbackByName[type.name] = callback;\n          callbacks.push(callback);\n        }\n      }\n\n      // Otherwise, if a null callback was specified, remove all callbacks with the given name.\n      else if (callback == null) {\n        for (var otherType in callbacksByType) {\n          if (callback = callbackByName[otherType + type.name]) {\n            callback.value = null;\n            var callbacks = callbacksByType[otherType], i = callbacks.indexOf(callback);\n            callbacksByType[otherType] = callbacks.slice(0, i).concat(callbacks.slice(i + 1));\n            delete callbackByName[callback.name];\n          }\n        }\n      }\n\n      return that;\n    };\n\n    while (++i < n) {\n      type = types[i] + \"\";\n      if (!type || (type in that)) throw new Error(\"illegal or duplicate type: \" + type);\n      callbacksByType[type] = [];\n      that[type] = applier(type);\n    }\n\n    function parseType(type) {\n      var i = (type += \"\").indexOf(\".\"), name = type;\n      if (i >= 0) type = type.slice(0, i); else name += \".\";\n      if (type && !callbacksByType.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n      return {type: type, name: name};\n    }\n\n    function applier(type) {\n      return function() {\n        var callbacks = callbacksByType[type], // Defensive reference; copy-on-remove.\n            callback,\n            callbackValue,\n            i = -1,\n            n = callbacks.length;\n\n        while (++i < n) {\n          if (callbackValue = (callback = callbacks[i]).value) {\n            callbackValue.apply(this, arguments);\n          }\n        }\n\n        return that;\n      };\n    }\n  }\n\n  function dispatch() {\n    return new Dispatch(arguments);\n  }\n\n  dispatch.prototype = Dispatch.prototype; // allow instanceof\n\n  var xhr = function(url, callback) {\n    var xhr,\n        event = dispatch(\"beforesend\", \"progress\", \"load\", \"error\"),\n        mimeType,\n        headers = new Map,\n        request = new XMLHttpRequest,\n        response,\n        responseType;\n\n    // If IE does not support CORS, use XDomainRequest.\n    if (typeof XDomainRequest !== \"undefined\"\n        && !(\"withCredentials\" in request)\n        && /^(http(s)?:)?\\/\\//.test(url)) request = new XDomainRequest;\n\n    \"onload\" in request\n        ? request.onload = request.onerror = respond\n        : request.onreadystatechange = function() { request.readyState > 3 && respond(); };\n\n    function respond() {\n      var status = request.status, result;\n      if (!status && hasResponse(request)\n          || status >= 200 && status < 300\n          || status === 304) {\n        if (response) {\n          try {\n            result = response.call(xhr, request);\n          } catch (e) {\n            event.error.call(xhr, e);\n            return;\n          }\n        } else {\n          result = request;\n        }\n        event.load.call(xhr, result);\n      } else {\n        event.error.call(xhr, request);\n      }\n    }\n\n    request.onprogress = function(e) {\n      event.progress.call(xhr, e);\n    };\n\n    xhr = {\n      header: function(name, value) {\n        name = (name + \"\").toLowerCase();\n        if (arguments.length < 2) return headers.get(name);\n        if (value == null) headers.delete(name);\n        else headers.set(name, value + \"\");\n        return xhr;\n      },\n\n      // If mimeType is non-null and no Accept header is set, a default is used.\n      mimeType: function(value) {\n        if (!arguments.length) return mimeType;\n        mimeType = value == null ? null : value + \"\";\n        return xhr;\n      },\n\n      // Specifies what type the response value should take;\n      // for instance, arraybuffer, blob, document, or text.\n      responseType: function(value) {\n        if (!arguments.length) return responseType;\n        responseType = value;\n        return xhr;\n      },\n\n      // Specify how to convert the response content to a specific type;\n      // changes the callback value on \"load\" events.\n      response: function(value) {\n        response = value;\n        return xhr;\n      },\n\n      // Alias for send(\"GET\", ).\n      get: function(data, callback) {\n        return xhr.send(\"GET\", data, callback);\n      },\n\n      // Alias for send(\"POST\", ).\n      post: function(data, callback) {\n        return xhr.send(\"POST\", data, callback);\n      },\n\n      // If callback is non-null, it will be used for error and load events.\n      send: function(method, data, callback) {\n        if (!callback && typeof data === \"function\") callback = data, data = null;\n        if (callback && callback.length === 1) callback = fixCallback(callback);\n        request.open(method, url, true);\n        if (mimeType != null && !headers.has(\"accept\")) headers.set(\"accept\", mimeType + \",*/*\");\n        if (request.setRequestHeader) headers.forEach(function(value, name) { request.setRequestHeader(name, value); });\n        if (mimeType != null && request.overrideMimeType) request.overrideMimeType(mimeType);\n        if (responseType != null) request.responseType = responseType;\n        if (callback) xhr.on(\"error\", callback).on(\"load\", function(request) { callback(null, request); });\n        event.beforesend.call(xhr, request);\n        request.send(data == null ? null : data);\n        return xhr;\n      },\n\n      abort: function() {\n        request.abort();\n        return xhr;\n      },\n\n      on: function() {\n        var value = event.on.apply(event, arguments);\n        return value === event ? xhr : value;\n      }\n    };\n\n    return callback\n        ? xhr.get(callback)\n        : xhr;\n  }\n\n  var xhrDsv = function(defaultMimeType, dsv) {\n    return function(url, row, callback) {\n      if (arguments.length < 3) callback = row, row = null;\n      var r = xhr(url).mimeType(defaultMimeType);\n      r.row = function(_) { return arguments.length ? r.response(responseOf(dsv, row = _)) : row; };\n      r.row(row);\n      return callback ? r.get(callback) : r;\n    };\n  }\n\n  var _tsv = xhrDsv(\"text/tab-separated-values\", tsv);\n\n  var csv = dsv(\",\");\n\n  var _csv = xhrDsv(\"text/csv\", csv);\n\n  var xhrType = function(defaultMimeType, response) {\n    return function(url, callback) {\n      var r = xhr(url).mimeType(defaultMimeType).response(response);\n      return callback ? r.get(callback) : r;\n    };\n  }\n\n  var xml = xhrType(\"application/xml\", function(request) {\n    return request.responseXML;\n  });\n\n  var text = xhrType(\"text/plain\", function(request) {\n    return request.responseText;\n  });\n\n  var json = xhrType(\"application/json\", function(request) {\n    return JSON.parse(request.responseText);\n  });\n\n  var html = xhrType(\"text/html\", function(request) {\n    return document.createRange().createContextualFragment(request.responseText);\n  });\n\n  exports.xhr = xhr;\n  exports.html = html;\n  exports.json = json;\n  exports.text = text;\n  exports.xml = xml;\n  exports.csv = _csv;\n  exports.tsv = _tsv;\n\n}));\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/d3-xhr/build/xhr.js\n ** module id = 22\n ** module chunks = 0\n **/","module.exports = function(haystack, needle, comparator, low, high) {\n  var mid, cmp;\n\n  if(low === undefined)\n    low = 0;\n\n  else {\n    low = low|0;\n    if(low < 0 || low >= haystack.length)\n      throw new RangeError(\"invalid lower bound\");\n  }\n\n  if(high === undefined)\n    high = haystack.length - 1;\n\n  else {\n    high = high|0;\n    if(high < low || high >= haystack.length)\n      throw new RangeError(\"invalid upper bound\");\n  }\n\n  while(low <= high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + (high - low >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    /* Too low. */\n    if(cmp < 0.0) \n      low  = mid + 1;\n\n    /* Too high. */\n    else if(cmp > 0.0)\n      high = mid - 1;\n    \n    /* Key found. */\n    else\n      return mid;\n  }\n\n  /* Key not found. */\n  return ~low;\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/binary-search/index.js\n ** module id = 23\n ** module chunks = 0\n **/","// Based on this code: https://github.com/adamwdraper/Numeral-js/blob/master/numeral.js\r\n\r\n'use strict';\r\n\r\nvar merge = require('merge');\r\n\r\nvar defaultOptions = {\r\n\tthousandsDelimeter: '',\r\n\tdecimalDelimeter: '.',\r\n\troundingFunction: Math.round\r\n};\r\n\r\nmodule.exports = function (number, format, options) {\r\n\treturn formatNumber(number, format, merge(true, defaultOptions, options));\r\n};\r\n\r\nfunction formatNumber(number, format, opts) {\r\n\tvar signed = false,\r\n\t\tnegative = false;\r\n\r\n\tvar whole = '',\r\n\t\tdivisional = '';\r\n\r\n\tif (format.indexOf('+') > -1) {\r\n\t\tsigned = true;\r\n\t\tformat = format.replace(/\\+/g, '');\r\n\t}\r\n\r\n\twhole = number.toString().split('.')[0];\r\n\tvar precision = format.split('.')[1];\r\n\tvar thousands = format.indexOf(',');\r\n\r\n\tif (precision) {\r\n\t\tif (precision.indexOf('[') > -1) {\r\n\t\t\tprecision = precision.replace(']', '');\r\n\t\t\tprecision = precision.split('[');\r\n\t\t\tdivisional = toFixed(number, (precision[0].length + precision[1].length), opts.roundingFunction, precision[1].length);\r\n\t\t} else {\r\n\t\t\tdivisional = toFixed(number, precision.length, opts.roundingFunction);\r\n\t\t}\r\n\r\n\t\twhole = divisional.split('.')[0];\r\n\r\n\t\tif (divisional.split('.')[1].length) {\r\n\t\t\tdivisional = opts.decimalDelimeter + divisional.split('.')[1];\r\n\t\t} else {\r\n\t\t\tdivisional = '';\r\n\t\t}\r\n\r\n\t} else {\r\n\t\twhole = toFixed(number, null, opts.roundingFunction);\r\n\t}\r\n\r\n\tif (whole.indexOf('-') > -1) {\r\n\t\twhole = whole.slice(1);\r\n\t\tnegative = true;\r\n\t}\r\n\r\n\tif (thousands > -1) {\r\n\t\twhole = whole.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1' + opts.thousandsDelimeter);\r\n\t}\r\n\r\n\tif (format.indexOf('.') === 0) {\r\n\t\twhole = '';\r\n\t}\r\n\r\n\treturn (negative ? '-' : '') +\r\n\t       ((!negative && signed) ? '+' : '') +\r\n\t       whole + divisional;\r\n}\r\n\r\nfunction toFixed(value, precision, roundingFunction, optionals) {\r\n\tvar power = Math.pow(10, precision),\r\n\t\toptionalsRegExp,\r\n\t\toutput;\r\n\r\n\toutput = (roundingFunction(value * power) / power).toFixed(precision);\r\n\r\n\tif (optionals) {\r\n\t\toptionalsRegExp = new RegExp('0{1,' + optionals + '}$');\r\n\t\toutput = output.replace(optionalsRegExp, '');\r\n\t}\r\n\r\n\treturn output;\r\n}\r\n\r\n// console.log(formatNumber(Math.PI, '0.[000]', merge(defaultOptions, null)));\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/simple-number-formatter/index.js\n ** module id = 24\n ** module chunks = 0\n **/","/*!\r\n * @name JavaScript/NodeJS Merge v1.2.0\r\n * @author yeikos\r\n * @repository https://github.com/yeikos/js.merge\r\n\r\n * Copyright 2014 yeikos - MIT license\r\n * https://raw.github.com/yeikos/js.merge/master/LICENSE\r\n */\r\n\r\n;(function(isNode) {\r\n\r\n\t/**\r\n\t * Merge one or more objects \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tvar Public = function(clone) {\r\n\r\n\t\treturn merge(clone === true, false, arguments);\r\n\r\n\t}, publicName = 'merge';\r\n\r\n\t/**\r\n\t * Merge two or more objects recursively \r\n\t * @param bool? clone\r\n\t * @param mixed,... arguments\r\n\t * @return object\r\n\t */\r\n\r\n\tPublic.recursive = function(clone) {\r\n\r\n\t\treturn merge(clone === true, true, arguments);\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Clone the input removing any reference\r\n\t * @param mixed input\r\n\t * @return mixed\r\n\t */\r\n\r\n\tPublic.clone = function(input) {\r\n\r\n\t\tvar output = input,\r\n\t\t\ttype = typeOf(input),\r\n\t\t\tindex, size;\r\n\r\n\t\tif (type === 'array') {\r\n\r\n\t\t\toutput = [];\r\n\t\t\tsize = input.length;\r\n\r\n\t\t\tfor (index=0;index<size;++index)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t} else if (type === 'object') {\r\n\r\n\t\t\toutput = {};\r\n\r\n\t\t\tfor (index in input)\r\n\r\n\t\t\t\toutput[index] = Public.clone(input[index]);\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t};\r\n\r\n\t/**\r\n\t * Merge two objects recursively\r\n\t * @param mixed input\r\n\t * @param mixed extend\r\n\t * @return mixed\r\n\t */\r\n\r\n\tfunction merge_recursive(base, extend) {\r\n\r\n\t\tif (typeOf(base) !== 'object')\r\n\r\n\t\t\treturn extend;\r\n\r\n\t\tfor (var key in extend) {\r\n\r\n\t\t\tif (typeOf(base[key]) === 'object' && typeOf(extend[key]) === 'object') {\r\n\r\n\t\t\t\tbase[key] = merge_recursive(base[key], extend[key]);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tbase[key] = extend[key];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn base;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Merge two or more objects\r\n\t * @param bool clone\r\n\t * @param bool recursive\r\n\t * @param array argv\r\n\t * @return object\r\n\t */\r\n\r\n\tfunction merge(clone, recursive, argv) {\r\n\r\n\t\tvar result = argv[0],\r\n\t\t\tsize = argv.length;\r\n\r\n\t\tif (clone || typeOf(result) !== 'object')\r\n\r\n\t\t\tresult = {};\r\n\r\n\t\tfor (var index=0;index<size;++index) {\r\n\r\n\t\t\tvar item = argv[index],\r\n\r\n\t\t\t\ttype = typeOf(item);\r\n\r\n\t\t\tif (type !== 'object') continue;\r\n\r\n\t\t\tfor (var key in item) {\r\n\r\n\t\t\t\tvar sitem = clone ? Public.clone(item[key]) : item[key];\r\n\r\n\t\t\t\tif (recursive) {\r\n\r\n\t\t\t\t\tresult[key] = merge_recursive(result[key], sitem);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult[key] = sitem;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Get type of variable\r\n\t * @param mixed input\r\n\t * @return string\r\n\t *\r\n\t * @see http://jsperf.com/typeofvar\r\n\t */\r\n\r\n\tfunction typeOf(input) {\r\n\r\n\t\treturn ({}).toString.call(input).slice(8, -1).toLowerCase();\r\n\r\n\t}\r\n\r\n\tif (isNode) {\r\n\r\n\t\tmodule.exports = Public;\r\n\r\n\t} else {\r\n\r\n\t\twindow[publicName] = Public;\r\n\r\n\t}\r\n\r\n})(typeof module === 'object' && module && typeof module.exports === 'object' && module.exports);\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/simple-number-formatter/~/merge/merge.js\n ** module id = 25\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 26\n ** module chunks = 0\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6h2v-6h-2zm4 0v6h2v-6h-2z\\\" transform=\\\"translate(1 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-pause.svg\n ** module id = 27\n ** module chunks = 0\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6h2v-6h-2zm2 3l5 3v-6l-5 3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-step-backward.svg\n ** module id = 28\n ** module chunks = 0\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M4 0l-4 3 4 3v-6zm0 3l4 3v-6l-4 3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-skip-backward.svg\n ** module id = 29\n ** module chunks = 0\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l4-3-4-3zm4 3v3l4-3-4-3v3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-skip-forward.svg\n ** module id = 30\n ** module chunks = 0\n **/","module.exports = \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"8\\\" height=\\\"8\\\" viewBox=\\\"0 0 8 8\\\">\\n  <path d=\\\"M0 0v6l5-3-5-3zm5 3v3h2v-6h-2v3z\\\" transform=\\\"translate(0 1)\\\" />\\n</svg>\"\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/raw-loader!./~/open-iconic/svg/media-step-forward.svg\n ** module id = 31\n ** module chunks = 0\n **/"],"sourceRoot":""}